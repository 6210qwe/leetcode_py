# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 2918
标题: Is Array a Preorder of Some ‌Binary Tree
难度: medium
链接: https://leetcode.cn/problems/is-array-a-preorder-of-some-binary-tree/
题目类型: 栈、树、深度优先搜索、二叉树
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
2764. 数组是否表示某二叉树的前序遍历 - 备战技术面试？力扣提供海量技术面试资源，帮助你高效提升编程技能,轻松拿下世界 IT 名企 Dream Offer。
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 使用栈来模拟二叉树的前序遍历过程。

算法步骤:
1. 初始化一个空栈。
2. 遍历数组中的每个元素：
   - 如果当前元素小于栈顶元素，则将其入栈。
   - 否则，弹出栈顶元素直到栈为空或栈顶元素大于当前元素，然后将当前元素入栈。
3. 如果遍历完成后没有违反前序遍历的规则，则返回 True，否则返回 False。

关键点:
- 使用栈来维护当前路径上的节点值。
- 确保每次遇到较大的值时，能够正确地回溯到合适的祖先节点。
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(n)，其中 n 是数组的长度。我们只需要遍历数组一次。
空间复杂度: O(n)，在最坏情况下，栈中可能会存储所有的节点。
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List

def isValidPreorder(preorder: List[int]) -> bool:
    """
    判断给定的数组是否是某二叉树的前序遍历结果。
    """
    stack = []
    lower_bound = float('-inf')
    
    for value in preorder:
        if value < lower_bound:
            return False
        while stack and value > stack[-1]:
            lower_bound = stack.pop()
        stack.append(value)
    
    return True


Solution = create_solution(isValidPreorder)