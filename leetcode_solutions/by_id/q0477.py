# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 477
标题: Total Hamming Distance
难度: medium
链接: https://leetcode.cn/problems/total-hamming-distance/
题目类型: 位运算、数组、数学
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
477. 汉明距离总和 - 两个整数的 汉明距离 [https://baike.baidu.com/item/%E6%B1%89%E6%98%8E%E8%B7%9D%E7%A6%BB/475174?fr=aladdin] 指的是这两个数字的二进制数对应位不同的数量。 给你一个整数数组 nums，请你计算并返回 nums 中任意两个数之间 汉明距离的总和 。 示例 1： 输入：nums = [4,14,2] 输出：6 解释：在二进制表示中，4 表示为 0100 ，14 表示为 1110 ，2表示为 0010 。（这样表示是为了体现后四位之间关系） 所以答案为： HammingDistance(4, 14) + HammingDistance(4, 2) + HammingDistance(14, 2) = 2 + 2 + 2 = 6 示例 2： 输入：nums = [4,14,4] 输出：4 提示： * 1 <= nums.length <= 104 * 0 <= nums[i] <= 109 * 给定输入的对应答案符合 32-bit 整数范围
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 按位统计，计算每一位的贡献

算法步骤:
1. 对每一位，统计该位为1的数的个数
2. 该位的贡献 = count * (n - count)
3. 累加所有位的贡献

关键点:
- 按位统计优化
- 时间复杂度O(32*n)
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(32*n) - 32位，n个数
空间复杂度: O(1) - 只使用常数额外空间
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List, Optional
from leetcode_solutions.utils.linked_list import ListNode
from leetcode_solutions.utils.tree import TreeNode
from leetcode_solutions.utils.solution import create_solution


def total_hamming_distance(nums: List[int]) -> int:
    """
    函数式接口 - 汉明距离总和
    
    实现思路:
    按位统计，计算每一位的贡献。
    
    Args:
        nums: 整数数组
        
    Returns:
        汉明距离总和
        
    Example:
        >>> total_hamming_distance([4,14,2])
        6
    """
    total = 0
    n = len(nums)
    
    for i in range(32):
        count = sum((num >> i) & 1 for num in nums)
        total += count * (n - count)
    
    return total


# 自动生成Solution类（无需手动编写）
Solution = create_solution(total_hamming_distance)
