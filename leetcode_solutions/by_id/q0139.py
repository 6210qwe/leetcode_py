# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 139
标题: Word Break
难度: medium
链接: https://leetcode.cn/problems/word-break/
题目类型: 字典树、记忆化搜索、数组、哈希表、字符串、动态规划
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
139. 单词拆分 - 给你一个字符串 s 和一个字符串列表 wordDict 作为字典。如果可以利用字典中出现的一个或多个单词拼接出 s 则返回 true。 注意：不要求字典中出现的单词全部都使用，并且字典中的单词可以重复使用。 示例 1： 输入: s = "leetcode", wordDict = ["leet", "code"] 输出: true 解释: 返回 true 因为 "leetcode" 可以由 "leet" 和 "code" 拼接成。 示例 2： 输入: s = "applepenapple", wordDict = ["apple", "pen"] 输出: true 解释: 返回 true 因为 "applepenapple" 可以由 "apple" "pen" "apple" 拼接成。 注意，你可以重复使用字典中的单词。 示例 3： 输入: s = "catsandog", wordDict = ["cats", "dog", "sand", "and", "cat"] 输出: false 提示： * 1 <= s.length <= 300 * 1 <= wordDict.length <= 1000 * 1 <= wordDict[i].length <= 20 * s 和 wordDict[i] 仅由小写英文字母组成 * wordDict 中的所有字符串 互不相同
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 动态规划，dp[i]表示s的前i个字符能否被拆分

算法步骤:
1. 将wordDict转换为集合提高查找效率
2. dp[i]表示s的前i个字符能否被拆分
3. 对于每个位置i，检查所有可能的单词
4. 如果s[j:i]在字典中且dp[j]为True，则dp[i]为True

关键点:
- 使用动态规划避免重复计算
- 时间复杂度O(n^2)，空间复杂度O(n)
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(n^2) - n为字符串长度
空间复杂度: O(n) - dp数组空间
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List
from leetcode_solutions.utils.solution import create_solution


def word_break(s: str, wordDict: List[str]) -> bool:
    """
    函数式接口 - 判断字符串能否被字典拆分
    
    实现思路:
    使用动态规划，dp[i]表示s的前i个字符能否被拆分。
    
    Args:
        s: 待拆分的字符串
        wordDict: 单词字典
        
    Returns:
        如果能够拆分返回True，否则返回False
        
    Example:
        >>> word_break("leetcode", ["leet", "code"])
        True
    """
    word_set = set(wordDict)
    n = len(s)
    dp = [False] * (n + 1)
    dp[0] = True
    
    for i in range(1, n + 1):
        for j in range(i):
            if dp[j] and s[j:i] in word_set:
                dp[i] = True
                break
    
    return dp[n]


# 自动生成Solution类（无需手动编写）
Solution = create_solution(word_break)
