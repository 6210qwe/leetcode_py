# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 1961
标题: Maximum Ice Cream Bars
难度: medium
链接: https://leetcode.cn/problems/maximum-ice-cream-bars/
题目类型: 贪心、数组、计数排序、排序
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
1833. 雪糕的最大数量 - 夏日炎炎，小男孩 Tony 想买一些雪糕消消暑。 商店中新到 n 支雪糕，用长度为 n 的数组 costs 表示雪糕的定价，其中 costs[i] 表示第 i 支雪糕的现金价格。Tony 一共有 coins 现金可以用于消费，他想要买尽可能多的雪糕。 注意：Tony 可以按任意顺序购买雪糕。 给你价格数组 costs 和现金量 coins ，请你计算并返回 Tony 用 coins 现金能够买到的雪糕的 最大数量 。 你必须使用计数排序解决此问题。 示例 1： 输入：costs = [1,3,2,4,1], coins = 7 输出：4 解释：Tony 可以买下标为 0、1、2、4 的雪糕，总价为 1 + 3 + 2 + 1 = 7 示例 2： 输入：costs = [10,6,8,7,7,8], coins = 5 输出：0 解释：Tony 没有足够的钱买任何一支雪糕。 示例 3： 输入：costs = [1,6,3,1,2,5], coins = 20 输出：6 解释：Tony 可以买下所有的雪糕，总价为 1 + 6 + 3 + 1 + 2 + 5 = 18 。 提示： * costs.length == n * 1 <= n <= 105 * 1 <= costs[i] <= 105 * 1 <= coins <= 108
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 使用贪心算法和计数排序来最大化购买的雪糕数量。

算法步骤:
1. 使用计数排序统计每个价格的雪糕数量。
2. 从小到大遍历价格，尽可能多地购买雪糕，直到用完所有现金或无法再购买更多雪糕。

关键点:
- 使用计数排序来统计每个价格的雪糕数量。
- 从小到大遍历价格，确保优先购买便宜的雪糕。
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(n + k)，其中 n 是 costs 的长度，k 是 costs 中最大值（即价格范围）。
空间复杂度: O(k)，用于存储计数排序的结果。
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List

def max_ice_cream(costs: List[int], coins: int) -> int:
    """
    计算并返回 Tony 用 coins 现金能够买到的雪糕的最大数量。
    """
    # 找到价格的最大值
    max_cost = max(costs)
    
    # 使用计数排序统计每个价格的雪糕数量
    count = [0] * (max_cost + 1)
    for cost in costs:
        count[cost] += 1
    
    # 从小到大遍历价格，尽可能多地购买雪糕
    total_ice_creams = 0
    for price in range(1, max_cost + 1):
        if count[price] == 0:
            continue
        if coins >= price:
            buy_count = min(count[price], coins // price)
            total_ice_creams += buy_count
            coins -= buy_count * price
        else:
            break
    
    return total_ice_creams

Solution = create_solution(max_ice_cream)