# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 1184
标题: Car Pooling
难度: medium
链接: https://leetcode.cn/problems/car-pooling/
题目类型: 数组、前缀和、排序、模拟、堆（优先队列）
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
1094. 拼车 - 车上最初有 capacity 个空座位。车 只能 向一个方向行驶（也就是说，不允许掉头或改变方向） 给定整数 capacity 和一个数组 trips , trips[i] = [numPassengersi, fromi, toi] 表示第 i 次旅行有 numPassengersi 乘客，接他们和放他们的位置分别是 fromi 和 toi 。这些位置是从汽车的初始位置向东的公里数。 当且仅当你可以在所有给定的行程中接送所有乘客时，返回 true，否则请返回 false。 示例 1： 输入：trips = [[2,1,5],[3,3,7]], capacity = 4 输出：false 示例 2： 输入：trips = [[2,1,5],[3,3,7]], capacity = 5 输出：true 提示： * 1 <= trips.length <= 1000 * trips[i].length == 3 * 1 <= numPassengersi <= 100 * 0 <= fromi < toi <= 1000 * 1 <= capacity <= 105
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 使用差分数组来记录每个站点的乘客变化，并通过前缀和计算每个站点的实际乘客数。

算法步骤:
1. 创建一个大小为 1001 的差分数组 `diff`，用于记录每个站点的乘客变化。
2. 遍历 `trips` 数组，对于每个行程 `[numPassengers, from, to]`，在 `from` 站点增加 `numPassengers`，在 `to` 站点减少 `numPassengers`。
3. 通过前缀和计算每个站点的实际乘客数。
4. 检查每个站点的实际乘客数是否超过 `capacity`，如果超过则返回 `False`，否则返回 `True`。

关键点:
- 使用差分数组可以高效地处理区间更新问题。
- 前缀和可以快速计算每个站点的实际乘客数。
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(n + m)，其中 n 是 `trips` 的长度，m 是站点的数量（最大为 1000）。
空间复杂度: O(m)，需要一个大小为 1001 的数组来存储差分数组。
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List

def carPooling(trips: List[List[int]], capacity: int) -> bool:
    """
    函数式接口 - 判断是否可以在所有给定的行程中接送所有乘客
    """
    # 差分数组
    diff = [0] * 1001
    
    # 更新差分数组
    for num_passengers, start, end in trips:
        diff[start] += num_passengers
        diff[end] -= num_passengers
    
    # 计算前缀和并检查容量
    current_passengers = 0
    for passengers_change in diff:
        current_passengers += passengers_change
        if current_passengers > capacity:
            return False
    
    return True

Solution = create_solution(carPooling)