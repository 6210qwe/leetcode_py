# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 157
标题: Read N Characters Given Read4
难度: easy
链接: https://leetcode.cn/problems/read-n-characters-given-read4/
题目类型: 数组、交互、模拟
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
157. 用 Read4 读取 N 个字符 - 备战技术面试？力扣提供海量技术面试资源，帮助你高效提升编程技能,轻松拿下世界 IT 名企 Dream Offer。
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 使用read4函数读取字符，直到读取n个字符或文件结束

算法步骤:
1. 定义read4函数（题目提供）
2. 循环调用read4，每次最多读取4个字符
3. 将读取的字符复制到buf中
4. 返回实际读取的字符数

关键点:
- 处理read4返回的字符数可能小于4的情况
- 时间复杂度O(n)，空间复杂度O(1)
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(n) - 需要读取n个字符
空间复杂度: O(1) - 只使用常数额外空间
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List
from leetcode_solutions.utils.solution import create_solution


def read4(buf4: List[str]) -> int:
    """
    read4函数（由题目提供，这里仅作占位）
    从文件读取最多4个字符到buf4
    """
    pass


def read_n_characters_given_read4(buf: List[str], n: int) -> int:
    """
    函数式接口 - 用Read4读取N个字符
    
    实现思路:
    使用read4函数读取字符，直到读取n个字符或文件结束。
    
    Args:
        buf: 目标缓冲区
        n: 要读取的字符数
        
    Returns:
        实际读取的字符数
        
    Example:
        >>> buf = [''] * 100
        >>> read_n_characters_given_read4(buf, 5)
        5
    """
    total = 0
    buf4 = [''] * 4
    
    while total < n:
        count = read4(buf4)
        if count == 0:
            break
        
        for i in range(count):
            if total < n:
                buf[total] = buf4[i]
                total += 1
            else:
                break
    
    return total


# 自动生成Solution类（无需手动编写）
Solution = create_solution(read_n_characters_given_read4)
