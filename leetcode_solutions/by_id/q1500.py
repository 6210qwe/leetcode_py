# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 1500
标题: Count Largest Group
难度: easy
链接: https://leetcode.cn/problems/count-largest-group/
题目类型: 哈希表、数学
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
1399. 统计最大组的数目 - 给定一个整数 n 。 我们需要根据数字的数位和将 1 到 n 的数字分组。例如，数字 14 和 5 属于 同一 组，而数字 13 和 3 属于 不同 组。 返回最大组的数字数量，即元素数量 最多 的组。 示例 1： 输入：n = 13 输出：4 解释：总共有 9 个组，将 1 到 13 按数位求和后这些组分别是： [1,10]，[2,11]，[3,12]，[4,13]，[5]，[6]，[7]，[8]，[9]。总共有 4 个组拥有的数字并列最多。 示例 2： 输入：n = 2 输出：2 解释：总共有 2 个大小为 1 的组 [1]，[2]。 提示： * 1 <= n <= 104
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 使用哈希表记录每个数位和对应的数字数量，然后找到最大数量的组。

算法步骤:
1. 初始化一个字典 `groups` 来记录每个数位和对应的数字数量。
2. 遍历从 1 到 n 的所有数字，计算每个数字的数位和，并更新 `groups` 字典。
3. 找到 `groups` 字典中最大值，并统计具有该最大值的组的数量。

关键点:
- 使用哈希表来记录数位和及其对应的数字数量。
- 通过遍历 `groups` 字典来找到最大数量的组。
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(n * d)，其中 n 是输入的范围，d 是数字的最大位数（对于 10^4 范围内的数字，d 最大为 5）。
空间复杂度: O(n)，用于存储哈希表 `groups`。
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List, Optional
from leetcode_solutions.utils.linked_list import ListNode
from leetcode_solutions.utils.tree import TreeNode
from leetcode_solutions.utils.solution import create_solution


def count_largest_group(n: int) -> int:
    """
    函数式接口 - 统计最大组的数目
    """
    def digit_sum(num: int) -> int:
        """计算一个数字的数位和"""
        return sum(int(digit) for digit in str(num))

    # 初始化哈希表
    groups = {}

    # 遍历从 1 到 n 的所有数字
    for i in range(1, n + 1):
        ds = digit_sum(i)
        if ds in groups:
            groups[ds] += 1
        else:
            groups[ds] = 1

    # 找到最大数量的组
    max_count = max(groups.values())
    return sum(1 for count in groups.values() if count == max_count)


Solution = create_solution(count_largest_group)