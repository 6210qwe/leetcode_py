# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 1689
标题: Detect Pattern of Length M Repeated K or More Times
难度: easy
链接: https://leetcode.cn/problems/detect-pattern-of-length-m-repeated-k-or-more-times/
题目类型: 数组、枚举
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
1566. 重复至少 K 次且长度为 M 的模式 - 给你一个正整数数组 arr，请你找出一个长度为 m 且在数组中至少重复 k 次的模式。 模式 是由一个或多个值组成的子数组（连续的子序列），连续 重复多次但 不重叠 。 模式由其长度和重复次数定义。 如果数组中存在至少重复 k 次且长度为 m 的模式，则返回 true ，否则返回 false 。 示例 1： 输入：arr = [1,2,4,4,4,4], m = 1, k = 3 输出：true 解释：模式 (4) 的长度为 1 ，且连续重复 4 次。注意，模式可以重复 k 次或更多次，但不能少于 k 次。 示例 2： 输入：arr = [1,2,1,2,1,1,1,3], m = 2, k = 2 输出：true 解释：模式 (1,2) 长度为 2 ，且连续重复 2 次。另一个符合题意的模式是 (2,1) ，同样重复 2 次。 示例 3： 输入：arr = [1,2,1,2,1,3], m = 2, k = 3 输出：false 解释：模式 (1,2) 长度为 2 ，但是只连续重复 2 次。不存在长度为 2 且至少重复 3 次的模式。 示例 4： 输入：arr = [1,2,3,1,2], m = 2, k = 2 输出：false 解释：模式 (1,2) 出现 2 次但并不连续，所以不能算作连续重复 2 次。 示例 5： 输入：arr = [2,2,2,2], m = 2, k = 3 输出：false 解释：长度为 2 的模式只有 (2,2) ，但是只连续重复 2 次。注意，不能计算重叠的重复次数。 提示： * 2 <= arr.length <= 100 * 1 <= arr[i] <= 100 * 1 <= m <= 100 * 2 <= k <= 100
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 使用滑动窗口来检查每个可能的模式，并验证其是否满足条件。

算法步骤:
1. 遍历数组，从每个可能的起始位置开始，检查长度为 m 的子数组。
2. 对于每个子数组，使用滑动窗口检查其是否连续重复 k 次。
3. 如果找到满足条件的模式，返回 True。
4. 如果遍历完所有可能的起始位置仍未找到满足条件的模式，返回 False。

关键点:
- 使用滑动窗口来高效地检查模式的重复次数。
- 确保模式的重复是连续且不重叠的。
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(n * m * k)，其中 n 是数组的长度，m 是模式的长度，k 是重复次数。
空间复杂度: O(1)，只使用了常数级的额外空间。
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List, Optional
from leetcode_solutions.utils.linked_list import ListNode
from leetcode_solutions.utils.tree import TreeNode
from leetcode_solutions.utils.solution import create_solution


def contains_pattern(arr: List[int], m: int, k: int) -> bool:
    """
    检查数组中是否存在长度为 m 且至少重复 k 次的模式。
    """
    n = len(arr)
    for i in range(n - m * k + 1):
        pattern = arr[i:i + m]
        if all(pattern == arr[i + j * m:i + (j + 1) * m] for j in range(k)):
            return True
    return False


Solution = create_solution(contains_pattern)