# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 350
标题: Intersection of Two Arrays II
难度: easy
链接: https://leetcode.cn/problems/intersection-of-two-arrays-ii/
题目类型: 数组、哈希表、双指针、二分查找、排序
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
350. 两个数组的交集 II - 给你两个整数数组 nums1 和 nums2 ，请你以数组形式返回两数组的交集。返回结果中每个元素出现的次数，应与元素在两个数组中都出现的次数一致（如果出现次数不一致，则考虑取较小值）。可以不考虑输出结果的顺序。 示例 1： 输入：nums1 = [1,2,2,1], nums2 = [2,2] 输出：[2,2] 示例 2: 输入：nums1 = [4,9,5], nums2 = [9,4,9,8,4] 输出：[4,9] 提示： * 1 <= nums1.length, nums2.length <= 1000 * 0 <= nums1[i], nums2[i] <= 1000 进阶： * 如果给定的数组已经排好序呢？你将如何优化你的算法？ * 如果 nums1 的大小比 nums2 小，哪种方法更优？ * 如果 nums2 的元素存储在磁盘上，内存是有限的，并且你不能一次加载所有的元素到内存中，你该怎么办？
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 使用哈希表统计元素出现次数

算法步骤:
1. 统计nums1中每个元素的出现次数
2. 遍历nums2，如果元素在哈希表中且计数>0，加入结果并减少计数
3. 返回结果数组

关键点:
- 需要保留重复元素，取最小出现次数
- 时间复杂度O(n+m)，空间复杂度O(min(n,m))
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(n+m) - n和m为数组长度
空间复杂度: O(min(n,m)) - 哈希表空间
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List, Optional
from collections import Counter
from leetcode_solutions.utils.linked_list import ListNode
from leetcode_solutions.utils.tree import TreeNode
from leetcode_solutions.utils.solution import create_solution


def intersect(nums1: List[int], nums2: List[int]) -> List[int]:
    """
    函数式接口 - 两个数组的交集 II
    
    实现思路:
    使用哈希表统计nums1中元素出现次数，然后遍历nums2。
    
    Args:
        nums1: 第一个数组
        nums2: 第二个数组
        
    Returns:
        交集数组（保留重复元素）
        
    Example:
        >>> intersect([1,2,2,1], [2,2])
        [2, 2]
    """
    # 统计nums1中每个元素的出现次数
    count = Counter(nums1)
    result = []
    
    # 遍历nums2，如果元素在count中且计数>0，加入结果
    for num in nums2:
        if count.get(num, 0) > 0:
            result.append(num)
            count[num] -= 1
    
    return result


# 自动生成Solution类（无需手动编写）
Solution = create_solution(intersect)
