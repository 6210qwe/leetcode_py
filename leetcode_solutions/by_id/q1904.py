# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 1904
标题: Second Largest Digit in a String
难度: easy
链接: https://leetcode.cn/problems/second-largest-digit-in-a-string/
题目类型: 哈希表、字符串
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
1796. 字符串中第二大的数字 - 给你一个混合字符串 s ，请你返回 s 中 第二大 的数字，如果不存在第二大的数字，请你返回 -1 。 混合字符串 由小写英文字母和数字组成。 示例 1： 输入：s = "dfa12321afd" 输出：2 解释：出现在 s 中的数字包括 [1, 2, 3] 。第二大的数字是 2 。 示例 2： 输入：s = "abc1111" 输出：-1 解释：出现在 s 中的数字只包含 [1] 。没有第二大的数字。 提示： * 1 <= s.length <= 500 * s 只包含小写英文字母和（或）数字。
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 使用集合存储出现的数字，并找到第二大的数字。

算法步骤:
1. 遍历字符串，提取所有数字并存储在集合中。
2. 将集合转换为列表并排序。
3. 如果列表长度小于2，返回-1；否则返回倒数第二个元素。

关键点:
- 使用集合去重，确保每个数字只存储一次。
- 排序后直接访问倒数第二个元素。
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(n + k log k)，其中 n 是字符串的长度，k 是不同数字的数量。
空间复杂度: O(k)，其中 k 是不同数字的数量。
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List, Optional
from leetcode_solutions.utils.linked_list import ListNode
from leetcode_solutions.utils.tree import TreeNode
from leetcode_solutions.utils.solution import create_solution


def second_largest_digit(s: str) -> int:
    """
    函数式接口 - 返回字符串中第二大的数字
    """
    # 提取所有数字并存储在集合中
    digits = set()
    for char in s:
        if char.isdigit():
            digits.add(int(char))
    
    # 将集合转换为列表并排序
    sorted_digits = sorted(digits)
    
    # 如果列表长度小于2，返回-1；否则返回倒数第二个元素
    if len(sorted_digits) < 2:
        return -1
    else:
        return sorted_digits[-2]


Solution = create_solution(second_largest_digit)