# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 3814
标题: Find Time Required to Eliminate Bacterial Strains
难度: hard
链接: https://leetcode.cn/problems/find-time-required-to-eliminate-bacterial-strains/
题目类型: 贪心、数组、数学、堆（优先队列）
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
3506. 查找消除细菌菌株所需时间 - 备战技术面试？力扣提供海量技术面试资源，帮助你高效提升编程技能,轻松拿下世界 IT 名企 Dream Offer。
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 使用贪心算法和优先队列来最小化消除细菌菌株所需的时间。

算法步骤:
1. 将每个细菌菌株的初始数量和增长速度存储在一个列表中。
2. 使用一个最小堆来跟踪当前最小的细菌菌株数量。
3. 每次从堆中取出当前最小的细菌菌株数量，并计算将其消除所需的时间。
4. 更新剩余细菌菌株的数量，并将它们重新放入堆中。
5. 重复上述步骤直到所有细菌菌株都被消除。

关键点:
- 使用最小堆来高效地找到当前最小的细菌菌株数量。
- 动态更新细菌菌株的数量，并重新插入堆中。
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(n log n)，其中 n 是细菌菌株的数量。每次插入和删除堆的操作都是 O(log n)。
空间复杂度: O(n)，需要存储所有的细菌菌株及其数量。
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List
import heapq

def find_time_to_eliminate_bacteria(strains: List[List[int]]) -> int:
    """
    计算消除所有细菌菌株所需的最短时间。
    
    :param strains: 每个元素是一个包含两个整数的列表 [initial_count, growth_rate]，表示初始数量和增长速度。
    :return: 消除所有细菌菌株所需的最短时间。
    """
    # 初始化堆
    heap = []
    for initial_count, growth_rate in strains:
        heapq.heappush(heap, (initial_count, growth_rate))
    
    time = 0
    while heap:
        current_count, growth_rate = heapq.heappop(heap)
        # 计算消除当前细菌菌株所需的时间
        time += current_count
        # 更新剩余细菌菌株的数量
        for i in range(len(heap)):
            count, rate = heap[i]
            count += growth_rate * time
            heap[i] = (count, rate)
        # 重新建堆
        heapq.heapify(heap)
    
    return time

Solution = create_solution(find_time_to_eliminate_bacteria)