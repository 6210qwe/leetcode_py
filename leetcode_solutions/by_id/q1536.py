# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 1536
标题: Customers Who Bought Products A and B but Not C
难度: medium
链接: https://leetcode.cn/problems/customers-who-bought-products-a-and-b-but-not-c/
题目类型: 数据库
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
1398. 购买了产品 A 和产品 B 却没有购买产品 C 的顾客 - 备战技术面试？力扣提供海量技术面试资源，帮助你高效提升编程技能,轻松拿下世界 IT 名企 Dream Offer。
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 使用集合操作来找出购买了产品 A 和 B 但未购买产品 C 的顾客。

算法步骤:
1. 创建三个集合分别存储购买了产品 A、B 和 C 的顾客。
2. 使用集合的交集和差集操作来找出满足条件的顾客。

关键点:
- 使用集合操作可以高效地进行交集和差集计算。
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(n)，其中 n 是购买记录的数量。每个购买记录只需要常数时间处理。
空间复杂度: O(m)，其中 m 是顾客数量。最坏情况下，所有顾客都购买了产品。
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List

def find_customers(purchases: List[List[str]]) -> List[str]:
    """
    找出购买了产品 A 和产品 B 却没有购买产品 C 的顾客。

    :param purchases: 购买记录列表，每个记录包含 [顾客ID, 产品ID]
    :return: 满足条件的顾客列表
    """
    # 创建三个集合分别存储购买了产品 A、B 和 C 的顾客
    bought_A = set()
    bought_B = set()
    bought_C = set()

    for customer, product in purchases:
        if product == 'A':
            bought_A.add(customer)
        elif product == 'B':
            bought_B.add(customer)
        elif product == 'C':
            bought_C.add(customer)

    # 使用集合的交集和差集操作来找出满足条件的顾客
    result = (bought_A & bought_B) - bought_C
    return list(result)

Solution = create_solution(find_customers)