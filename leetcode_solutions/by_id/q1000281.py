# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 1000281
标题: 行星碰撞
难度: medium
链接: https://leetcode.cn/problems/XagZNi/
题目类型: 栈、数组、模拟
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
LCR 037. 行星碰撞 - 给定一个整数数组 asteroids，表示在同一行的小行星。 对于数组中的每一个元素，其绝对值表示小行星的大小，正负表示小行星的移动方向（正表示向右移动，负表示向左移动）。每一颗小行星以相同的速度移动。 找出碰撞后剩下的所有小行星。碰撞规则：两个行星相互碰撞，较小的行星会爆炸。如果两颗行星大小相同，则两颗行星都会爆炸。两颗移动方向相同的行星，永远不会发生碰撞。 示例 1： 输入：asteroids = [5,10,-5] 输出：[5,10] 解释：10 和 -5 碰撞后只剩下 10 。 5 和 10 永远不会发生碰撞。 示例 2： 输入：asteroids = [8,-8] 输出：[] 解释：8 和 -8 碰撞后，两者都发生爆炸。 示例 3： 输入：asteroids = [10,2,-5] 输出：[10] 解释：2 和 -5 发生碰撞后剩下 -5 。10 和 -5 发生碰撞后剩下 10 。 示例 4： 输入：asteroids = [-2,-1,1,2] 输出：[-2,-1,1,2] 解释：-2 和 -1 向左移动，而 1 和 2 向右移动。 由于移动方向相同的行星不会发生碰撞，所以最终没有行星发生碰撞。 提示： * 2 <= asteroids.length <= 104 * -1000 <= asteroids[i] <= 1000 * asteroids[i] != 0 注意：本题与主站 735 题相同： https://leetcode.cn/problems/asteroid-collision/ [https://leetcode.cn/problems/asteroid-collision/]
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 使用栈来模拟行星碰撞的过程。

算法步骤:
1. 初始化一个空栈。
2. 遍历行星数组：
   - 如果当前行星向右移动（正数），直接将其压入栈中。
   - 如果当前行星向左移动（负数），则需要检查栈顶行星是否向右移动且未被摧毁：
     - 如果栈顶行星向右移动且比当前行星大，则当前行星被摧毁。
     - 如果栈顶行星向右移动且比当前行星小，则栈顶行星被摧毁，并继续检查新的栈顶行星。
     - 如果栈顶行星向右移动且与当前行星大小相同，则两者都被摧毁。
3. 最后，栈中剩余的行星即为碰撞后的结果。

关键点:
- 使用栈来存储尚未被摧毁的行星。
- 通过比较栈顶行星和当前行星的方向和大小来决定是否发生碰撞。
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(n)，其中 n 是行星数组的长度。每个行星最多只会被压入和弹出栈一次。
空间复杂度: O(n)，在最坏情况下，栈中可能会存储所有的行星。
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List

def asteroidCollision(asteroids: List[int]) -> List[int]:
    """
    函数式接口 - 行星碰撞
    """
    stack = []
    for asteroid in asteroids:
        while stack and asteroid < 0 < stack[-1]:
            if stack[-1] < -asteroid:
                stack.pop()
                continue
            elif stack[-1] == -asteroid:
                stack.pop()
            break
        else:
            stack.append(asteroid)
    
    return stack

Solution = create_solution(asteroidCollision)