# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 3216
标题: Distribute Candies Among Children III
难度: hard
链接: https://leetcode.cn/problems/distribute-candies-among-children-iii/
题目类型: 数学、组合数学
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
2927. 给小朋友们分糖果 III - 备战技术面试？力扣提供海量技术面试资源，帮助你高效提升编程技能,轻松拿下世界 IT 名企 Dream Offer。
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 使用动态规划来解决这个问题。我们定义一个二维数组 dp[i][j] 表示前 i 个糖果分配给 j 个小朋友的方案数。

算法步骤:
1. 初始化 dp 数组，dp[0][0] = 1，表示没有糖果时只有一种分配方式（即不分配）。
2. 遍历每个糖果和每个小朋友，更新 dp 数组。
3. 最终结果为 dp[n][k]，其中 n 是糖果总数，k 是小朋友数量。

关键点:
- 使用模运算防止整数溢出。
- 优化空间复杂度，使用一维数组进行状态转移。
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(n * k)
空间复杂度: O(k)
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List, Optional
from leetcode_solutions.utils.linked_list import ListNode
from leetcode_solutions.utils.tree import TreeNode
from leetcode_solutions.utils.solution import create_solution


def distribute_candies(candies: int, num_people: int) -> List[int]:
    """
    函数式接口 - 分配糖果给小朋友
    """
    # 动态规划数组，dp[j] 表示当前糖果数下第 j 个小朋友的糖果数
    dp = [0] * (num_people + 1)
    dp[0] = 1  # 初始化，没有糖果时只有一种分配方式

    for i in range(1, candies + 1):
        new_dp = [0] * (num_people + 1)
        for j in range(1, min(i, num_people) + 1):
            new_dp[j] = (new_dp[j - 1] + dp[j]) % (10**9 + 7)
        dp = new_dp

    return dp[1:num_people + 1]


Solution = create_solution(distribute_candies)