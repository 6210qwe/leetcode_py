# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 311
标题: Sparse Matrix Multiplication
难度: medium
链接: https://leetcode.cn/problems/sparse-matrix-multiplication/
题目类型: 数组、哈希表、矩阵
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
311. 稀疏矩阵的乘法 - 备战技术面试？力扣提供海量技术面试资源，帮助你高效提升编程技能,轻松拿下世界 IT 名企 Dream Offer。
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 优化矩阵乘法，只计算非零元素的乘积

算法步骤:
1. 对于稀疏矩阵，只遍历非零元素
2. 使用哈希表或直接遍历，只计算非零元素的乘积
3. 累加结果到对应位置

关键点:
- 优化稀疏矩阵乘法，跳过零元素
- 时间复杂度O(m*n*k)，但实际运行更快（稀疏矩阵优化）
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(m*n*k) - m和n为第一个矩阵的行列，k为第二个矩阵的列数
空间复杂度: O(m*k) - 结果矩阵空间
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List
from leetcode_solutions.utils.solution import create_solution


def sparse_matrix_multiplication(mat1: List[List[int]], mat2: List[List[int]]) -> List[List[int]]:
    """
    函数式接口 - 稀疏矩阵的乘法
    
    实现思路:
    优化矩阵乘法，只计算非零元素的乘积。
    
    Args:
        mat1: 第一个矩阵
        mat2: 第二个矩阵
        
    Returns:
        矩阵乘积结果
        
    Example:
        >>> sparse_matrix_multiplication([[1,0,0],[-1,0,3]], [[7,0,0],[0,0,0],[0,0,1]])
        [[7, 0, 0], [-7, 0, 3]]
    """
    m, n = len(mat1), len(mat1[0])
    k = len(mat2[0])
    
    result = [[0] * k for _ in range(m)]
    
    for i in range(m):
        for j in range(n):
            if mat1[i][j] != 0:
                for l in range(k):
                    result[i][l] += mat1[i][j] * mat2[j][l]
    
    return result


# 自动生成Solution类（无需手动编写）
Solution = create_solution(sparse_matrix_multiplication)
