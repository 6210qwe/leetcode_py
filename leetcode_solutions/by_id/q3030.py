# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 3030
标题: Find The K-th Lucky Number
难度: medium
链接: https://leetcode.cn/problems/find-the-k-th-lucky-number/
题目类型: 位运算、数学、字符串
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
2802. 找出第 K 个幸运数字 - 备战技术面试？力扣提供海量技术面试资源，帮助你高效提升编程技能,轻松拿下世界 IT 名企 Dream Offer。
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 将 k 转换为二进制表示，然后将二进制中的 0 替换为 1，1 替换为 0，得到的结果即为第 k 个幸运数字。

算法步骤:
1. 将 k 减 1（因为幸运数字从 1 开始计数）。
2. 将 k-1 转换为二进制表示。
3. 将二进制表示中的 0 替换为 1，1 替换为 0。
4. 将替换后的二进制字符串转换为十进制整数。

关键点:
- 幸运数字的定义是将 k 的二进制表示中的 0 和 1 互换。
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(log k) - 主要操作是将 k 转换为二进制和二进制到十进制的转换。
空间复杂度: O(log k) - 存储二进制字符串所需的空间。
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List, Optional
from leetcode_solutions.utils.linked_list import ListNode
from leetcode_solutions.utils.tree import TreeNode
from leetcode_solutions.utils.solution import create_solution


def solution_function_name(k: int) -> int:
    """
    函数式接口 - 找出第 k 个幸运数字
    """
    # 将 k 减 1
    k -= 1
    # 将 k-1 转换为二进制表示
    binary_str = bin(k)[2:]
    # 将二进制表示中的 0 替换为 1，1 替换为 0
    lucky_binary_str = ''.join('1' if bit == '0' else '0' for bit in binary_str)
    # 将替换后的二进制字符串转换为十进制整数
    return int(lucky_binary_str, 2)


Solution = create_solution(solution_function_name)