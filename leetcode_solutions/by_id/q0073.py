# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 73
标题: Set Matrix Zeroes
难度: medium
链接: https://leetcode.cn/problems/set-matrix-zeroes/
题目类型: 数组、哈希表、矩阵
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
73. 矩阵置零 - 给定一个 m x n 的矩阵，如果一个元素为 0 ，则将其所在行和列的所有元素都设为 0 。请使用 原地 [http://baike.baidu.com/item/%E5%8E%9F%E5%9C%B0%E7%AE%97%E6%B3%95] 算法。 示例 1： [https://assets.leetcode.com/uploads/2020/08/17/mat1.jpg] 输入：matrix = [[1,1,1],[1,0,1],[1,1,1]] 输出：[[1,0,1],[0,0,0],[1,0,1]] 示例 2： [https://assets.leetcode.com/uploads/2020/08/17/mat2.jpg] 输入：matrix = [[0,1,2,0],[3,4,5,2],[1,3,1,5]] 输出：[[0,0,0,0],[0,4,5,0],[0,3,1,0]] 提示： * m == matrix.length * n == matrix[0].length * 1 <= m, n <= 200 * -231 <= matrix[i][j] <= 231 - 1 进阶： * 一个直观的解决方案是使用 O(mn) 的额外空间，但这并不是一个好的解决方案。 * 一个简单的改进方案是使用 O(m + n) 的额外空间，但这仍然不是最好的解决方案。 * 你能想出一个仅使用常量空间的解决方案吗？
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 使用第一行和第一列作为标记，记录哪些行和列需要置零

算法步骤:
1. 先检查第一行和第一列是否有0，用两个变量记录
2. 遍历矩阵（从第二行第二列开始），如果matrix[i][j] == 0：
   - 将matrix[i][0]和matrix[0][j]设为0作为标记
3. 再次遍历矩阵，如果matrix[i][0] == 0或matrix[0][j] == 0，将matrix[i][j]设为0
4. 根据第一步的变量，决定是否将第一行和第一列置零

关键点:
- 使用第一行和第一列作为标记，避免使用额外空间
- 需要先检查第一行和第一列，避免标记被覆盖
- 时间复杂度O(m*n)，空间复杂度O(1)
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(m*n) - 需要遍历矩阵两次
空间复杂度: O(1) - 只使用常数额外空间
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List
from leetcode_solutions.utils.solution import create_solution


def set_zeroes(matrix: List[List[int]]) -> None:
    """
    函数式接口 - 使用第一行和第一列作为标记
    
    实现思路:
    使用第一行和第一列作为标记，记录哪些行和列需要置零，实现O(1)空间复杂度。
    
    Args:
        matrix: m×n的矩阵，原地修改
        
    Returns:
        None（原地修改matrix）
        
    Example:
        >>> matrix = [[1,1,1],[1,0,1],[1,1,1]]
        >>> set_zeroes(matrix)
        >>> # matrix变为[[1,0,1],[0,0,0],[1,0,1]]
    """
    m, n = len(matrix), len(matrix[0])
    first_row_zero = any(matrix[0][j] == 0 for j in range(n))
    first_col_zero = any(matrix[i][0] == 0 for i in range(m))
    
    # 使用第一行和第一列作为标记
    for i in range(1, m):
        for j in range(1, n):
            if matrix[i][j] == 0:
                matrix[i][0] = 0
                matrix[0][j] = 0
    
    # 根据标记置零
    for i in range(1, m):
        for j in range(1, n):
            if matrix[i][0] == 0 or matrix[0][j] == 0:
                matrix[i][j] = 0
    
    # 处理第一行和第一列
    if first_row_zero:
        for j in range(n):
            matrix[0][j] = 0
    if first_col_zero:
        for i in range(m):
            matrix[i][0] = 0


# 自动生成Solution类（无需手动编写）
Solution = create_solution(set_zeroes)
