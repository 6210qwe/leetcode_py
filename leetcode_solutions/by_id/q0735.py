# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 735
标题: Asteroid Collision
难度: medium
链接: https://leetcode.cn/problems/asteroid-collision/
题目类型: 栈、数组、模拟
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
735. 小行星碰撞 - 给定一个整数数组 asteroids，表示在同一行的小行星。数组中小行星的索引表示它们在空间中的相对位置。 对于数组中的每一个元素，其绝对值表示小行星的大小，正负表示小行星的移动方向（正表示向右移动，负表示向左移动）。每一颗小行星以相同的速度移动。 找出碰撞后剩下的所有小行星。碰撞规则：两个小行星相互碰撞，较小的小行星会爆炸。如果两颗小行星大小相同，则两颗小行星都会爆炸。两颗移动方向相同的小行星，永远不会发生碰撞。 示例 1： 输入：asteroids = [5,10,-5] 输出：[5,10] 解释：10 和 -5 碰撞后只剩下 10 。 5 和 10 永远不会发生碰撞。 示例 2： 输入：asteroids = [8,-8] 输出：[] 解释：8 和 -8 碰撞后，两者都发生爆炸。 示例 3： 输入：asteroids = [10,2,-5] 输出：[10] 解释：2 和 -5 发生碰撞后剩下 -5 。10 和 -5 发生碰撞后剩下 10 。 示例 4： 输入：asteroids = [3,5,-6,2,-1,4] 输出：[-6,2,4] 解释：小行星 -6 使小行星 3 和 5 爆炸，然后继续向左移动。在另一边，小行星 2 使小行星 -1 爆炸，然后继续向右移动，没有碰撞小行星 4。 提示： * 2 <= asteroids.length <= 104 * -1000 <= asteroids[i] <= 1000 * asteroids[i] != 0
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 使用栈来模拟小行星的碰撞过程。当遇到向右移动的小行星时，将其压入栈中；当遇到向左移动的小行星时，检查栈顶是否有向右移动的小行星并进行碰撞处理。

算法步骤:
1. 初始化一个空栈。
2. 遍历小行星数组：
   - 如果当前小行星向右移动，直接将其压入栈中。
   - 如果当前小行星向左移动，检查栈顶是否有向右移动的小行星并进行碰撞处理：
     - 如果栈顶小行星比当前小行星小，则栈顶小行星爆炸，继续检查下一个栈顶小行星。
     - 如果栈顶小行星和当前小行星大小相同，则两者都爆炸。
     - 如果栈顶小行星比当前小行星大，则当前小行星爆炸。
3. 最终栈中的小行星即为碰撞后剩下的小行星。

关键点:
- 使用栈来模拟小行星的碰撞过程。
- 只有向右移动的小行星和向左移动的小行星才会发生碰撞。
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(n)，其中 n 是小行星数组的长度。每个小行星最多只会被压入和弹出栈一次。
空间复杂度: O(n)，最坏情况下所有小行星都不会发生碰撞，全部压入栈中。
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List


def asteroidCollision(asteroids: List[int]) -> List[int]:
    """
    函数式接口 - 实现最优解法
    """
    stack = []
    
    for asteroid in asteroids:
        while stack and asteroid < 0 < stack[-1]:
            if stack[-1] < -asteroid:
                stack.pop()
                continue
            elif stack[-1] == -asteroid:
                stack.pop()
            break
        else:
            stack.append(asteroid)
    
    return stack


Solution = create_solution(asteroidCollision)