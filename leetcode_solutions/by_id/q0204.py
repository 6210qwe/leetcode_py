# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 204
标题: Count Primes
难度: medium
链接: https://leetcode.cn/problems/count-primes/
题目类型: 数组、数学、枚举、数论
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
204. 计数质数 - 给定整数 n ，返回 所有小于非负整数 n 的质数的数量 。 示例 1： 输入：n = 10 输出：4 解释：小于 10 的质数一共有 4 个, 它们是 2, 3, 5, 7 。 示例 2： 输入：n = 0 输出：0 示例 3： 输入：n = 1 输出：0 提示： * 0 <= n <= 5 * 106
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 使用埃拉托斯特尼筛法（Sieve of Eratosthenes）筛选质数

算法步骤:
1. 创建布尔数组is_prime，初始化为True
2. 从2开始，将每个质数的倍数标记为False
3. 统计is_prime中为True的数量

关键点:
- 使用筛法高效筛选质数
- 时间复杂度O(n log log n)，空间复杂度O(n)
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(n log log n) - 筛法的时间复杂度
空间复杂度: O(n) - 布尔数组空间
"""

# ============================================================================
# 代码实现
# ============================================================================

from leetcode_solutions.utils.solution import create_solution


def count_primes(n: int) -> int:
    """
    函数式接口 - 计数质数
    
    实现思路:
    使用埃拉托斯特尼筛法筛选质数。
    
    Args:
        n: 非负整数
        
    Returns:
        小于n的质数数量
        
    Example:
        >>> count_primes(10)
        4
    """
    if n < 2:
        return 0
    
    is_prime = [True] * n
    is_prime[0] = is_prime[1] = False
    
    for i in range(2, int(n ** 0.5) + 1):
        if is_prime[i]:
            for j in range(i * i, n, i):
                is_prime[j] = False
    
    return sum(is_prime)


# 自动生成Solution类（无需手动编写）
Solution = create_solution(count_primes)
