# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 470
标题: Implement Rand10() Using Rand7()
难度: medium
链接: https://leetcode.cn/problems/implement-rand10-using-rand7/
题目类型: 数学、拒绝采样、概率与统计、随机化
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
470. 用 Rand7() 实现 Rand10() - 给定方法 rand7 可生成 [1,7] 范围内的均匀随机整数，试写一个方法 rand10 生成 [1,10] 范围内的均匀随机整数。你只能调用 rand7() 且不能调用其他方法。请不要使用系统的 Math.random() 方法。
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 拒绝采样，使用rand7()生成均匀分布的rand10()

算法步骤:
1. 使用rand7()生成1-49的均匀分布
2. 拒绝41-49，只接受1-40
3. 对1-40取模10，得到0-9，加1得到1-10

关键点:
- 拒绝采样保证均匀分布
- 期望调用次数约为2.45次
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(1) - 期望常数时间
空间复杂度: O(1) - 只使用常数额外空间
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List, Optional
from leetcode_solutions.utils.linked_list import ListNode
from leetcode_solutions.utils.tree import TreeNode
from leetcode_solutions.utils.solution import create_solution


def rand7():
    """假设的rand7函数，实际由LeetCode提供"""
    import random
    return random.randint(1, 7)


def rand10() -> int:
    """
    函数式接口 - 用 Rand7() 实现 Rand10()
    
    实现思路:
    拒绝采样：使用rand7()生成1-49的均匀分布，拒绝41-49，只接受1-40。
    
    Returns:
        1-10范围内的均匀随机整数
        
    Example:
        >>> result = rand10()
        >>> 1 <= result <= 10
        True
    """
    while True:
        # 生成1-49的均匀分布
        num = (rand7() - 1) * 7 + rand7()
        # 只接受1-40
        if num <= 40:
            return (num - 1) % 10 + 1


# 自动生成Solution类（无需手动编写）
Solution = create_solution(rand10)
