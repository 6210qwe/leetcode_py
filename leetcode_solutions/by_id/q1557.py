# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 1557
标题: Check If a String Contains All Binary Codes of Size K
难度: medium
链接: https://leetcode.cn/problems/check-if-a-string-contains-all-binary-codes-of-size-k/
题目类型: 位运算、哈希表、字符串、哈希函数、滚动哈希
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
1461. 检查一个字符串是否包含所有长度为 K 的二进制子串 - 给你一个二进制字符串 s 和一个整数 k 。如果所有长度为 k 的二进制字符串都是 s 的子串，请返回 true ，否则请返回 false 。 示例 1： 输入：s = "00110110", k = 2 输出：true 解释：长度为 2 的二进制串包括 "00"，"01"，"10" 和 "11"。它们分别是 s 中下标为 0，1，3，2 开始的长度为 2 的子串。 示例 2： 输入：s = "0110", k = 1 输出：true 解释：长度为 1 的二进制串包括 "0" 和 "1"，显然它们都是 s 的子串。 示例 3： 输入：s = "0110", k = 2 输出：false 解释：长度为 2 的二进制串 "00" 没有出现在 s 中。 提示： * 1 <= s.length <= 5 * 105 * s[i] 不是'0' 就是 '1' * 1 <= k <= 20
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 使用滑动窗口和哈希集合来检查所有长度为 k 的子串是否都出现过。

算法步骤:
1. 初始化一个哈希集合，用于存储所有长度为 k 的子串。
2. 使用滑动窗口遍历字符串 s，将每个长度为 k 的子串加入哈希集合。
3. 如果哈希集合的大小等于 2^k，则说明所有长度为 k 的二进制子串都出现了，返回 True；否则返回 False。

关键点:
- 使用滑动窗口可以高效地生成所有长度为 k 的子串。
- 哈希集合用于去重并记录所有出现过的子串。
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(n)，其中 n 是字符串 s 的长度。我们只需要一次遍历字符串 s。
空间复杂度: O(2^k)，哈希集合最多存储 2^k 个不同的子串。
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List, Optional
from leetcode_solutions.utils.linked_list import ListNode
from leetcode_solutions.utils.tree import TreeNode
from leetcode_solutions.utils.solution import create_solution


def check_if_string_contains_all_binary_codes(s: str, k: int) -> bool:
    """
    函数式接口 - 检查一个字符串是否包含所有长度为 K 的二进制子串
    """
    # 初始化哈希集合
    seen = set()
    
    # 使用滑动窗口遍历字符串 s
    for i in range(len(s) - k + 1):
        # 获取当前长度为 k 的子串
        substring = s[i:i+k]
        # 将子串加入哈希集合
        seen.add(substring)
    
    # 检查哈希集合的大小是否等于 2^k
    return len(seen) == 2 ** k


Solution = create_solution(check_if_string_contains_all_binary_codes)