# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 35
标题: Search Insert Position
难度: easy
链接: https://leetcode.cn/problems/search-insert-position/
题目类型: 数组、二分查找
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
35. 搜索插入位置 - 给定一个排序数组和一个目标值，在数组中找到目标值，并返回其索引。如果目标值不存在于数组中，返回它将会被按顺序插入的位置。 请必须使用时间复杂度为 O(log n) 的算法。 示例 1: 输入: nums = [1,3,5,6], target = 5 输出: 2 示例 2: 输入: nums = [1,3,5,6], target = 2 输出: 1 示例 3: 输入: nums = [1,3,5,6], target = 7 输出: 4 提示: * 1 <= nums.length <= 104 * -104 <= nums[i] <= 104 * nums 为 无重复元素 的 升序 排列数组 * -104 <= target <= 104
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 二分查找，找到第一个大于等于target的位置

算法步骤:
1. 使用二分查找，left = 0, right = len(nums)
2. 计算mid = (left + right) // 2
3. 如果nums[mid] < target，在右半部分查找：left = mid + 1
4. 否则，在左半部分查找：right = mid
5. 重复直到left == right
6. 返回left（插入位置）

关键点:
- 二分查找找到第一个>=target的位置
- 如果target存在，返回其索引
- 如果target不存在，返回应该插入的位置
- 时间复杂度O(log n)，空间复杂度O(1)
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(log n) - 二分查找，n为数组长度
空间复杂度: O(1) - 只使用常数额外空间
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List
from leetcode_solutions.utils.solution import create_solution


def search_insert(nums: List[int], target: int) -> int:
    """
    函数式接口 - 二分查找实现
    
    实现思路:
    使用二分查找找到第一个大于等于target的位置，这就是插入位置。
    
    Args:
        nums: 无重复元素的升序排列数组
        target: 目标值
        
    Returns:
        目标值的索引，如果不存在则返回应该插入的位置
        
    Example:
        >>> search_insert([1,3,5,6], 5)
        2
        >>> search_insert([1,3,5,6], 2)
        1
        >>> search_insert([1,3,5,6], 7)
        4
    """
    left, right = 0, len(nums)
    
    while left < right:
        mid = (left + right) // 2
        if nums[mid] < target:
            left = mid + 1
        else:
            right = mid
    
    return left


# 自动生成Solution类（无需手动编写）
Solution = create_solution(search_insert)
