# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 400
标题: Nth Digit
难度: medium
链接: https://leetcode.cn/problems/nth-digit/
题目类型: 数学、二分查找
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
400. 第 N 位数字 - 给你一个整数 n ，请你在无限的整数序列 [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, ...] 中找出并返回第 n 位上的数字。 示例 1： 输入：n = 3 输出：3 示例 2： 输入：n = 11 输出：0 解释：第 11 位数字在序列 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, ... 里是 0 ，它是 10 的一部分。 提示： * 1 <= n <= 231 - 1
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 找出第n位数字所在的数字范围，然后定位到具体数字和位置

算法步骤:
1. 确定第n位数字所在的数字位数范围（1位、2位、3位等）
2. 计算该范围内的起始位置和数字
3. 确定具体是哪个数字
4. 确定是该数字的第几位

关键点:
- 按位数分组计算
- 时间复杂度O(log n)，空间复杂度O(1)
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(log n) - 需要确定数字的位数
空间复杂度: O(1) - 只使用常数额外空间
"""

# ============================================================================
# 代码实现
# ============================================================================

from leetcode_solutions.utils.solution import create_solution


def nth_digit(n: int) -> int:
    """
    函数式接口 - 第N位数字
    
    实现思路:
    找出第n位数字所在的数字范围，然后定位到具体数字和位置。
    
    Args:
        n: 第n位数字的位置
        
    Returns:
        第n位上的数字
        
    Example:
        >>> nth_digit(11)
        0
    """
    digit = 1  # 当前数字的位数
    start = 1  # 当前位数范围的起始数字
    count = 9  # 当前位数范围的数字个数
    
    # 确定第n位数字所在的位数范围
    while n > count:
        n -= count
        digit += 1
        start *= 10
        count = 9 * start * digit
    
    # 确定具体是哪个数字
    num = start + (n - 1) // digit
    
    # 确定是该数字的第几位（从右往左，0-indexed）
    digit_index = (n - 1) % digit
    
    # 返回该位上的数字
    return int(str(num)[digit_index])


# 自动生成Solution类（无需手动编写）
Solution = create_solution(nth_digit)
