# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 2020
标题: Remove One Element to Make the Array Strictly Increasing
难度: easy
链接: https://leetcode.cn/problems/remove-one-element-to-make-the-array-strictly-increasing/
题目类型: 数组
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
1909. 删除一个元素使数组严格递增 - 给你一个下标从 0 开始的整数数组 nums ，如果 恰好 删除 一个 元素后，数组 严格递增 ，那么请你返回 true ，否则返回 false 。如果数组本身已经是严格递增的，请你也返回 true 。 数组 nums 是 严格递增 的定义为：对于任意下标的 1 <= i < nums.length 都满足 nums[i - 1] < nums[i] 。 示例 1： 输入：nums = [1,2,10,5,7] 输出：true 解释：从 nums 中删除下标 2 处的 10 ，得到 [1,2,5,7] 。 [1,2,5,7] 是严格递增的，所以返回 true 。 示例 2： 输入：nums = [2,3,1,2] 输出：false 解释： [3,1,2] 是删除下标 0 处元素后得到的结果。 [2,1,2] 是删除下标 1 处元素后得到的结果。 [2,3,2] 是删除下标 2 处元素后得到的结果。 [2,3,1] 是删除下标 3 处元素后得到的结果。 没有任何结果数组是严格递增的，所以返回 false 。 示例 3： 输入：nums = [1,1,1] 输出：false 解释：删除任意元素后的结果都是 [1,1] 。 [1,1] 不是严格递增的，所以返回 false 。 示例 4： 输入：nums = [1,2,3] 输出：true 解释：[1,2,3] 已经是严格递增的，所以返回 true 。 提示： * 2 <= nums.length <= 1000 * 1 <= nums[i] <= 1000
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 通过一次遍历检查数组是否可以通过删除一个元素变成严格递增的。

算法步骤:
1. 初始化一个变量 `removed` 来记录是否已经删除了一个元素。
2. 遍历数组，检查相邻元素是否满足严格递增条件。
3. 如果发现不满足严格递增条件的情况：
   - 如果 `removed` 为 `True`，则返回 `False`，因为已经删除了一个元素。
   - 否则，将 `removed` 置为 `True`，并根据具体情况决定删除当前元素还是前一个元素。
4. 如果遍历完数组没有返回 `False`，则返回 `True`。

关键点:
- 只允许删除一个元素。
- 在遍历时需要考虑删除当前元素或前一个元素的情况。
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(n)，其中 n 是数组的长度。我们只需要一次遍历数组。
空间复杂度: O(1)，只使用了常数级的额外空间。
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List, Optional
from leetcode_solutions.utils.linked_list import ListNode
from leetcode_solutions.utils.tree import TreeNode
from leetcode_solutions.utils.solution import create_solution


def can_be_strictly_increasing(nums: List[int]) -> bool:
    """
    函数式接口 - 判断是否可以通过删除一个元素使数组严格递增
    """
    removed = False
    for i in range(1, len(nums)):
        if nums[i] <= nums[i - 1]:
            if removed:
                return False
            removed = True
            if i > 1 and nums[i] <= nums[i - 2]:
                nums[i] = nums[i - 1]
    return True


Solution = create_solution(can_be_strictly_increasing)