# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 1983
标题: Maximum Population Year
难度: easy
链接: https://leetcode.cn/problems/maximum-population-year/
题目类型: 数组、计数、前缀和
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
1854. 人口最多的年份 - 给你一个二维整数数组 logs ，其中每个 logs[i] = [birthi, deathi] 表示第 i 个人的出生和死亡年份。 年份 x 的 人口 定义为这一年期间活着的人的数目。第 i 个人被计入年份 x 的人口需要满足：x 在闭区间 [birthi, deathi - 1] 内。注意，人不应当计入他们死亡当年的人口中。 返回 人口最多 且 最早 的年份。 示例 1： 输入：logs = [[1993,1999],[2000,2010]] 输出：1993 解释：人口最多为 1 ，而 1993 是人口为 1 的最早年份。 示例 2： 输入：logs = [[1950,1961],[1960,1971],[1970,1981]] 输出：1960 解释： 人口最多为 2 ，分别出现在 1960 和 1970 。 其中最早年份是 1960 。 提示： * 1 <= logs.length <= 100 * 1950 <= birthi < deathi <= 2050
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 使用差分数组来记录每年的人口变化，并通过前缀和计算每年人口数量。

算法步骤:
1. 初始化一个长度为 101 的数组 `population_changes`，用于记录从 1950 到 2050 每年的出生和死亡人数变化。
2. 遍历 `logs` 数组，对于每个 `[birth, death]`，在 `population_changes` 中将 `birth` 年份增加 1，`death` 年份减少 1。
3. 计算前缀和数组 `population`，表示每年人口数量。
4. 遍历 `population` 数组，找到人口最多且最早的年份。

关键点:
- 使用差分数组记录每年的人口变化。
- 通过前缀和计算每年人口数量。
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(n + m)，其中 n 是 logs 的长度，m 是年份范围（101）。
空间复杂度: O(m)，用于存储差分数组和前缀和数组。
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List

def maximum_population_year(logs: List[List[int]]) -> int:
    """
    函数式接口 - 返回人口最多且最早的年份
    """
    population_changes = [0] * 101  # 1950 到 2050 年共 101 年
    for birth, death in logs:
        population_changes[birth - 1950] += 1
        population_changes[death - 1950] -= 1
    
    max_population = 0
    current_population = 0
    max_year = 1950
    for year, change in enumerate(population_changes):
        current_population += change
        if current_population > max_population:
            max_population = current_population
            max_year = year + 1950
    
    return max_year

Solution = create_solution(maximum_population_year)