# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 69
标题: Sqrt(x)
难度: easy
链接: https://leetcode.cn/problems/sqrtx/
题目类型: 数学、二分查找
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
69. x 的平方根 - 给你一个非负整数 x ，计算并返回 x 的 算术平方根 。 由于返回类型是整数，结果只保留 整数部分 ，小数部分将被 舍去 。 注意：不允许使用任何内置指数函数和算符，例如 pow(x, 0.5) 或者 x ** 0.5 。 示例 1： 输入：x = 4 输出：2 示例 2： 输入：x = 8 输出：2 解释：8 的算术平方根是 2.82842..., 由于返回类型是整数，小数部分将被舍去。 提示： * 0 <= x <= 231 - 1
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 二分查找，在[0, x]范围内查找最大的mid使得mid*mid <= x

算法步骤:
1. 特殊情况：x < 2，直接返回x
2. 二分查找：
   - left = 0, right = x
   - 当left < right时：
     * mid = (left + right + 1) // 2（向上取整）
     * 如果mid * mid <= x，left = mid
     * 否则，right = mid - 1
3. 返回left

关键点:
- 使用二分查找，时间复杂度O(log x)
- 注意mid的计算要向上取整，避免死循环
- 使用left = mid而不是left = mid + 1，因为mid可能是答案
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(log x) - 二分查找
空间复杂度: O(1) - 只使用常数额外空间
"""

# ============================================================================
# 代码实现
# ============================================================================

from leetcode_solutions.utils.solution import create_solution


def my_sqrt(x: int) -> int:
    """
    函数式接口 - 二分查找
    
    实现思路:
    使用二分查找在[0, x]范围内查找最大的mid使得mid*mid <= x。
    
    Args:
        x: 非负整数
        
    Returns:
        x的算术平方根的整数部分
        
    Example:
        >>> my_sqrt(4)
        2
        >>> my_sqrt(8)
        2
    """
    if x < 2:
        return x
    
    left, right = 0, x
    while left < right:
        # 向上取整，避免死循环
        mid = (left + right + 1) // 2
        if mid * mid <= x:
            left = mid
        else:
            right = mid - 1
    
    return left


# 自动生成Solution类（无需手动编写）
Solution = create_solution(my_sqrt)
