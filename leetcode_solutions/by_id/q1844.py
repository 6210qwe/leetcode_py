# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 1844
标题: Maximum Number of Balls in a Box
难度: easy
链接: https://leetcode.cn/problems/maximum-number-of-balls-in-a-box/
题目类型: 哈希表、数学、计数
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
1742. 盒子中小球的最大数量 - 你在一家生产小球的玩具厂工作，有 n 个小球，编号从 lowLimit 开始，到 highLimit 结束（包括 lowLimit 和 highLimit ，即 n == highLimit - lowLimit + 1）。另有无限数量的盒子，编号从 1 到 infinity 。 你的工作是将每个小球放入盒子中，其中盒子的编号应当等于小球编号上每位数字的和。例如，编号 321 的小球应当放入编号 3 + 2 + 1 = 6 的盒子，而编号 10 的小球应当放入编号 1 + 0 = 1 的盒子。 给你两个整数 lowLimit 和 highLimit ，返回放有最多小球的盒子中的小球数量。如果有多个盒子都满足放有最多小球，只需返回其中任一盒子的小球数量。 示例 1： 输入：lowLimit = 1, highLimit = 10 输出：2 解释： 盒子编号：1 2 3 4 5 6 7 8 9 10 11 ... 小球数量：2 1 1 1 1 1 1 1 1 0 0 ... 编号 1 的盒子放有最多小球，小球数量为 2 。 示例 2： 输入：lowLimit = 5, highLimit = 15 输出：2 解释： 盒子编号：1 2 3 4 5 6 7 8 9 10 11 ... 小球数量：1 1 1 1 2 2 1 1 1 0 0 ... 编号 5 和 6 的盒子放有最多小球，每个盒子中的小球数量都是 2 。 示例 3： 输入：lowLimit = 19, highLimit = 28 输出：2 解释： 盒子编号：1 2 3 4 5 6 7 8 9 10 11 12 ... 小球数量：0 1 1 1 1 1 1 1 1 2 0 0 ... 编号 10 的盒子放有最多小球，小球数量为 2 。 提示： * 1 <= lowLimit <= highLimit <= 105
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 使用哈希表记录每个盒子中的小球数量，并计算每个编号的小球对应的盒子编号。

算法步骤:
1. 初始化一个哈希表 `box_counts` 来记录每个盒子中的小球数量。
2. 遍历从 `lowLimit` 到 `highLimit` 的每个小球编号。
3. 对于每个小球编号，计算其各位数字之和，得到盒子编号。
4. 在哈希表中更新该盒子编号对应的小球数量。
5. 最后，返回哈希表中最大值。

关键点:
- 使用哈希表来高效地记录和查找每个盒子中的小球数量。
- 计算每个小球编号的各位数字之和。
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(n * d)，其中 n 是小球的数量 (highLimit - lowLimit + 1)，d 是小球编号的位数（最多为 5 位）。
空间复杂度: O(n)，最坏情况下，每个小球编号的各位数字之和可能不同，需要存储 n 个不同的盒子编号。
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List, Optional
from leetcode_solutions.utils.linked_list import ListNode
from leetcode_solutions.utils.tree import TreeNode
from leetcode_solutions.utils.solution import create_solution


def count_box_balls(low_limit: int, high_limit: int) -> int:
    """
    返回放有最多小球的盒子中的小球数量。
    """
    def digit_sum(num: int) -> int:
        """计算一个数的各位数字之和。"""
        return sum(int(digit) for digit in str(num))

    box_counts = {}
    for ball_number in range(low_limit, high_limit + 1):
        box_number = digit_sum(ball_number)
        if box_number in box_counts:
            box_counts[box_number] += 1
        else:
            box_counts[box_number] = 1

    return max(box_counts.values())


Solution = create_solution(count_box_balls)