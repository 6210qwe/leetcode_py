# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 1000477
标题: 交通枢纽
难度: medium
链接: https://leetcode.cn/problems/D9PW8w/
题目类型: 图
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
LCP 62. 交通枢纽 - 为了缓解「力扣嘉年华」期间的人流压力，组委会在活动期间开设了一些交通专线。`path[i] = [a, b]` 表示有一条从地点 `a`通往地点 `b` 的 **单向** 交通专线。 若存在一个地点，满足以下要求，我们则称之为 **交通枢纽**： - 所有地点（除自身外）均有一条 **单向** 专线 **直接** 通往该地点； - 该地点不存在任何 **通往其他地点** 的单向专线。 请返回交通专线的 **交通枢纽**。若不存在，则返回 `-1`。 **注意：** - 对于任意一个地点，至少被一条专线连通。 **示例 1：** >输入：`path = [[0,1],[0,3],[1,3],[2,0],[2,3]]` > >输出：`3` > >解释：如下图所示： > 地点 `0,1,2` 各有一条通往地点 `3` 的交通专线， > 且地点 `3` 不存在任何**通往其他地点**的交通专线。 >![image.png](https://pic.leetcode.cn/1663902572-yOlUCr-image.png){:width=200px} **示例 2：** >输入：`path = [[0,3],[1,0],[1,3],[2,0],[3,0],[3,2]]` > >输出：`-1` > >解释：如下图所示：不存在满足 **交通枢纽** 的地点。 >![image.png](https://pic.leetcode.cn/1663902595-McsEkY-image.png){:width=200px} **提示：** - `1 <= path.length <= 1000` - `0 <= path[i][0], path[i][1] <= 1000` - `path[i][0]` 与 `path[i][1]` 不相等
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 使用两个集合分别记录所有起点和终点，然后找到满足条件的交通枢纽。

算法步骤:
1. 初始化两个集合 `start_set` 和 `end_set`，分别记录所有起点和终点。
2. 遍历路径列表 `path`，将每个路径的起点加入 `start_set`，将每个路径的终点加入 `end_set`。
3. 检查 `end_set` 中是否存在一个节点，它不在 `start_set` 中，并且 `end_set` 的大小等于 `start_set` 的大小加一。
4. 如果存在这样的节点，返回该节点；否则返回 `-1`。

关键点:
- 使用集合来高效地记录和查找起点和终点。
- 确保交通枢纽的定义：所有其他节点都有一条单向专线直接通往该节点，且该节点没有通往其他节点的专线。
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(n)，其中 n 是路径的数量。我们需要遍历路径列表一次。
空间复杂度: O(m)，其中 m 是节点的数量。我们需要存储起点和终点集合。
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List, Optional
from leetcode_solutions.utils.linked_list import ListNode
from leetcode_solutions.utils.tree import TreeNode
from leetcode_solutions.utils.solution import create_solution


def find_transport_hub(paths: List[List[int]]) -> int:
    """
    函数式接口 - 找到交通枢纽
    """
    start_set = set()
    end_set = set()

    for start, end in paths:
        start_set.add(start)
        end_set.add(end)

    # 交通枢纽的条件：end_set 中存在一个节点，它不在 start_set 中，并且 end_set 的大小等于 start_set 的大小加一
    for end in end_set:
        if end not in start_set and len(end_set) == len(start_set) + 1:
            return end

    return -1


Solution = create_solution(find_transport_hub)