# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 1019
标题: Squares of a Sorted Array
难度: easy
链接: https://leetcode.cn/problems/squares-of-a-sorted-array/
题目类型: 数组、双指针、排序
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
977. 有序数组的平方 - 给你一个按 非递减顺序 排序的整数数组 nums，返回 每个数字的平方 组成的新数组，要求也按 非递减顺序 排序。 示例 1： 输入：nums = [-4,-1,0,3,10] 输出：[0,1,9,16,100] 解释：平方后，数组变为 [16,1,0,9,100] 排序后，数组变为 [0,1,9,16,100] 示例 2： 输入：nums = [-7,-3,2,3,11] 输出：[4,9,9,49,121] 提示： * 1 <= nums.length <= 104 * -104 <= nums[i] <= 104 * nums 已按 非递减顺序 排序 进阶： * 请你设计时间复杂度为 O(n) 的算法解决本问题
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 使用双指针从两端向中间遍历数组，比较两端元素的平方值，并将较大的平方值放入结果数组的末尾。

算法步骤:
1. 初始化两个指针 left 和 right 分别指向数组的起始和末尾。
2. 初始化一个结果数组 res，长度与输入数组相同。
3. 从结果数组的末尾开始填充，比较 nums[left] 和 nums[right] 的平方值，将较大的平方值放入 res 中，并移动相应的指针。
4. 重复步骤 3 直到所有元素都被处理完。

关键点:
- 使用双指针从两端向中间遍历，确保每次都能找到当前最大的平方值。
- 结果数组从末尾开始填充，避免了额外的空间开销。
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(n)，其中 n 是数组的长度，因为每个元素只被处理一次。
空间复杂度: O(1)，除了输出数组外，只使用了常数级的额外空间。
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List

def sorted_squares(nums: List[int]) -> List[int]:
    """
    返回每个数字的平方组成的新数组，并按非递减顺序排序。
    """
    n = len(nums)
    res = [0] * n
    left, right = 0, n - 1
    pos = n - 1
    
    while left <= right:
        if abs(nums[left]) > abs(nums[right]):
            res[pos] = nums[left] ** 2
            left += 1
        else:
            res[pos] = nums[right] ** 2
            right -= 1
        pos -= 1
    
    return res

Solution = create_solution(sorted_squares)