# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 2122
标题: Count Special Quadruplets
难度: easy
链接: https://leetcode.cn/problems/count-special-quadruplets/
题目类型: 数组、哈希表、枚举
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
1995. 统计特殊四元组 - 给你一个 下标从 0 开始 的整数数组 nums ，返回满足下述条件的 不同 四元组 (a, b, c, d) 的 数目 ： * nums[a] + nums[b] + nums[c] == nums[d] ，且 * a < b < c < d 示例 1： 输入：nums = [1,2,3,6] 输出：1 解释：满足要求的唯一一个四元组是 (0, 1, 2, 3) 因为 1 + 2 + 3 == 6 。 示例 2： 输入：nums = [3,3,6,4,5] 输出：0 解释：[3,3,6,4,5] 中不存在满足要求的四元组。 示例 3： 输入：nums = [1,1,1,3,5] 输出：4 解释：满足要求的 4 个四元组如下： - (0, 1, 2, 3): 1 + 1 + 1 == 3 - (0, 1, 3, 4): 1 + 1 + 3 == 5 - (0, 2, 3, 4): 1 + 1 + 3 == 5 - (1, 2, 3, 4): 1 + 1 + 3 == 5 提示： * 4 <= nums.length <= 50 * 1 <= nums[i] <= 100
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 使用哈希表来存储和查找，以减少时间复杂度。

算法步骤:
1. 初始化一个计数器 `count` 为 0。
2. 使用两个嵌套循环遍历所有可能的 (b, c) 对。
3. 对于每个 (b, c) 对，计算 `target = nums[d] - (nums[b] + nums[c])`。
4. 使用哈希表记录 `nums[a]` 出现的次数。
5. 如果 `target` 在哈希表中存在，则将哈希表中 `target` 的值加到 `count` 中。
6. 返回 `count`。

关键点:
- 使用哈希表来存储 `nums[a]` 的出现次数，以快速查找。
- 通过两层循环遍历 (b, c) 对，并计算 `target` 来减少时间复杂度。
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(n^2)，其中 n 是 nums 的长度。我们需要两层循环来遍历 (b, c) 对。
空间复杂度: O(n)，哈希表的空间复杂度。
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List, Optional
from leetcode_solutions.utils.linked_list import ListNode
from leetcode_solutions.utils.tree import TreeNode
from leetcode_solutions.utils.solution import create_solution


def count_special_quadruplets(nums: List[int]) -> int:
    """
    函数式接口 - 统计满足条件的四元组 (a, b, c, d) 的数目。
    """
    n = len(nums)
    count = 0
    for b in range(1, n - 2):
        for c in range(b + 1, n - 1):
            target = nums[c] + nums[b]
            seen = {}
            for a in range(b):
                if nums[a] not in seen:
                    seen[nums[a]] = 0
                seen[nums[a]] += 1
            for d in range(c + 1, n):
                if nums[d] - target in seen:
                    count += seen[nums[d] - target]
    return count


Solution = create_solution(count_special_quadruplets)