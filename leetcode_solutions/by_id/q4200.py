# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 4200
标题: Reverse Letters Then Special Characters in a String
难度: easy
链接: https://leetcode.cn/problems/reverse-letters-then-special-characters-in-a-string/
题目类型: 其他
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
3823. 反转一个字符串里的字母后反转特殊字符 - 给你一个由小写英文字母和特殊字符组成的字符串 s。 你的任务是 按顺序 执行以下操作： * 反转小写字母，并将它们放回原来字母所占据的位置。 * 反转特殊字符，并将它们放回原来特殊字符所占据的位置。 返回执行反转操作后的结果字符串。 示例 1： 输入： s = ")ebc#da@f(" 输出： "(fad@cb#e)" 解释： * 字符串中的字母为 ['e', 'b', 'c', 'd', 'a', 'f']： * 反转它们得到 ['f', 'a', 'd', 'c', 'b', 'e'] * s 变为 ")fad#cb@e(" * 字符串中的特殊字符为 [')', '#', '@', '(']： * 反转它们得到 ['(', '@', '#', ')'] * s 变为 "(fad@cb#e)" 示例 2： 输入： s = "z" 输出： "z" 解释： 字符串仅包含一个字母，反转它不会改变字符串。没有特殊字符。 示例 3： 输入： s = "!@#$%^&*()" 输出： ")(*&^%$#@!" 解释： 字符串不包含字母。字符串全部由特殊字符组成，因此反转特殊字符即反转整个字符串。 提示： * 1 <= s.length <= 100 * s 仅由小写英文字母和 "!@#$%^&*()" 中的特殊字符组成。
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 分别提取字母和特殊字符，分别反转后再放回原位置。

算法步骤:
1. 提取字符串中的所有字母并存储在一个列表中。
2. 提取字符串中的所有特殊字符并存储在一个列表中。
3. 反转字母列表和特殊字符列表。
4. 构建新的字符串，按原位置将反转后的字母和特殊字符放回。

关键点:
- 使用两个指针分别指向字母和特殊字符列表，构建新的字符串。
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(n)，其中 n 是字符串的长度。每个字符只处理一次。
空间复杂度: O(n)，需要额外的空间存储字母和特殊字符。
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List, Optional
from leetcode_solutions.utils.linked_list import ListNode
from leetcode_solutions.utils.tree import TreeNode
from leetcode_solutions.utils.solution import create_solution


def solution_function_name(s: str) -> str:
    """
    函数式接口 - 反转字符串中的字母和特殊字符
    """
    # 提取字母和特殊字符
    letters = [c for c in s if c.isalpha()]
    specials = [c for c in s if not c.isalpha()]

    # 反转字母和特殊字符
    letters.reverse()
    specials.reverse()

    # 构建新的字符串
    letter_index = 0
    special_index = 0
    result = []

    for c in s:
        if c.isalpha():
            result.append(letters[letter_index])
            letter_index += 1
        else:
            result.append(specials[special_index])
            special_index += 1

    return ''.join(result)


Solution = create_solution(solution_function_name)