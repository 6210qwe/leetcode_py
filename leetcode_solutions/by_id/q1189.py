# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 1189
标题: Encode Number
难度: medium
链接: https://leetcode.cn/problems/encode-number/
题目类型: 位运算、数学、字符串
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
给定一个非负整数 num，将其编码为一个新整数。编码规则如下：
从最低有效位开始，将 num 的每一位二进制表示的位数依次写入新整数中。
例如：num = 10 (二进制 1010)，编码后的新整数为 2020 (二进制 11111100100)。
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 将 num 的每一位二进制表示的位数依次写入新整数中。

算法步骤:
1. 初始化结果 res 为 0 和位移量 shift 为 0。
2. 遍历 num 的每一位二进制表示：
   - 取出当前位的值。
   - 将当前位的值左移 shift 位后加入结果 res。
   - 更新 shift 为 shift + 当前位的值。
3. 返回结果 res。

关键点:
- 使用位运算来处理二进制表示。
- 通过左移操作将当前位的值加入结果中。
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(log n)，其中 n 是 num 的大小，因为我们需要遍历 num 的每一位二进制表示。
空间复杂度: O(1)，只使用了常数级的额外空间。
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List, Optional
from leetcode_solutions.utils.linked_list import ListNode
from leetcode_solutions.utils.tree import TreeNode
from leetcode_solutions.utils.solution import create_solution


def solution_function_name(num: int) -> int:
    """
    函数式接口 - 将 num 编码为一个新整数
    """
    res = 0
    shift = 0
    while num > 0:
        # 取出当前位的值
        bit = num % 2
        # 将当前位的值左移 shift 位后加入结果 res
        res |= bit << shift
        # 更新 shift 为 shift + 当前位的值
        shift += bit
        # 移除 num 的最低位
        num >>= 1
    return res


Solution = create_solution(solution_function_name)