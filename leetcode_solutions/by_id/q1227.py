# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 1227
标题: Number of Equivalent Domino Pairs
难度: easy
链接: https://leetcode.cn/problems/number-of-equivalent-domino-pairs/
题目类型: 数组、哈希表、计数
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
1128. 等价多米诺骨牌对的数量 - 给你一组多米诺骨牌 dominoes 。 形式上，dominoes[i] = [a, b] 与 dominoes[j] = [c, d] 等价 当且仅当 (a == c 且 b == d) 或者 (a == d 且 b == c) 。即一张骨牌可以通过旋转 0 度或 180 度得到另一张多米诺骨牌。 在 0 <= i < j < dominoes.length 的前提下，找出满足 dominoes[i] 和 dominoes[j] 等价的骨牌对 (i, j) 的数量。 示例 1： 输入：dominoes = [[1,2],[2,1],[3,4],[5,6]] 输出：1 示例 2： 输入：dominoes = [[1,2],[1,2],[1,1],[1,2],[2,2]] 输出：3 提示： * 1 <= dominoes.length <= 4 * 104 * dominoes[i].length == 2 * 1 <= dominoes[i][j] <= 9
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 使用哈希表来记录每种等价多米诺骨牌的数量，然后计算等价对的数量。

算法步骤:
1. 初始化一个字典 `count` 来记录每种等价多米诺骨牌的数量。
2. 遍历每个多米诺骨牌，将其转换为一个标准化的形式（例如 `[min(a, b), max(a, b)]`），并更新字典中的计数。
3. 计算等价对的数量。对于每种等价多米诺骨牌，如果其数量为 `n`，则等价对的数量为 `n * (n - 1) // 2`。

关键点:
- 使用标准化形式来表示多米诺骨牌，确保 `[a, b]` 和 `[b, a]` 被视为相同的。
- 使用组合公式 `n * (n - 1) // 2` 来计算等价对的数量。
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(n)，其中 n 是多米诺骨牌的数量。我们只需要遍历一次多米诺骨牌数组。
空间复杂度: O(n)，在最坏情况下，所有多米诺骨牌都是不同的，需要存储每个骨牌的信息。
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List, Optional
from leetcode_solutions.utils.linked_list import ListNode
from leetcode_solutions.utils.tree import TreeNode
from leetcode_solutions.utils.solution import create_solution


def num_equiv_domino_pairs(dominoes: List[List[int]]) -> int:
    """
    函数式接口 - 计算等价多米诺骨牌对的数量
    """
    count = {}
    result = 0
    
    for domino in dominoes:
        # 标准化多米诺骨牌
        key = tuple(sorted(domino))
        
        if key in count:
            result += count[key]
            count[key] += 1
        else:
            count[key] = 1
    
    return result


Solution = create_solution(num_equiv_domino_pairs)