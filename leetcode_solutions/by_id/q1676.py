# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 1676
标题: Minimum Number of Days to Eat N Oranges
难度: hard
链接: https://leetcode.cn/problems/minimum-number-of-days-to-eat-n-oranges/
题目类型: 记忆化搜索、动态规划
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
1553. 吃掉 N 个橘子的最少天数 - 厨房里总共有 n 个橘子，你决定每一天选择如下方式之一吃这些橘子： * 吃掉一个橘子。 * 如果剩余橘子数 n 能被 2 整除，那么你可以吃掉 n/2 个橘子。 * 如果剩余橘子数 n 能被 3 整除，那么你可以吃掉 2*(n/3) 个橘子。 每天你只能从以上 3 种方案中选择一种方案。 请你返回吃掉所有 n 个橘子的最少天数。 示例 1： 输入：n = 10 输出：4 解释：你总共有 10 个橘子。 第 1 天：吃 1 个橘子，剩余橘子数 10 - 1 = 9。 第 2 天：吃 6 个橘子，剩余橘子数 9 - 2*(9/3) = 9 - 6 = 3。（9 可以被 3 整除） 第 3 天：吃 2 个橘子，剩余橘子数 3 - 2*(3/3) = 3 - 2 = 1。 第 4 天：吃掉最后 1 个橘子，剩余橘子数 1 - 1 = 0。 你需要至少 4 天吃掉 10 个橘子。 示例 2： 输入：n = 6 输出：3 解释：你总共有 6 个橘子。 第 1 天：吃 3 个橘子，剩余橘子数 6 - 6/2 = 6 - 3 = 3。（6 可以被 2 整除） 第 2 天：吃 2 个橘子，剩余橘子数 3 - 2*(3/3) = 3 - 2 = 1。（3 可以被 3 整除） 第 3 天：吃掉剩余 1 个橘子，剩余橘子数 1 - 1 = 0。 你至少需要 3 天吃掉 6 个橘子。 示例 3： 输入：n = 1 输出：1 示例 4： 输入：n = 56 输出：6 提示： * 1 <= n <= 2*10^9
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 使用记忆化搜索来避免重复计算，并通过递归的方式找到最小天数。

算法步骤:
1. 定义一个递归函数 `min_days`，使用 `@lru_cache` 进行记忆化。
2. 对于每个 `n`，考虑三种情况：
   - 吃掉一个橘子，剩余 `n-1` 个橘子。
   - 如果 `n` 能被 2 整除，吃掉 `n/2` 个橘子，剩余 `n/2` 个橘子。
   - 如果 `n` 能被 3 整除，吃掉 `2*(n/3)` 个橘子，剩余 `n/3` 个橘子。
3. 返回这三种情况中的最小值加 1（表示当前天数）。

关键点:
- 使用记忆化搜索避免重复计算。
- 递归地处理每种情况，找到最小天数。
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(log n)
空间复杂度: O(log n)
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List, Optional
from leetcode_solutions.utils.linked_list import ListNode
from leetcode_solutions.utils.tree import TreeNode
from leetcode_solutions.utils.solution import create_solution
from functools import lru_cache

def solution_function_name(n: int) -> int:
    """
    函数式接口 - 返回吃掉 n 个橘子的最少天数
    """
    @lru_cache(None)
    def min_days(n: int) -> int:
        if n == 0:
            return 0
        if n == 1:
            return 1
        # 吃掉一个橘子
        days = 1 + min_days(n - 1)
        # 如果 n 能被 2 整除，吃掉 n/2 个橘子
        if n % 2 == 0:
            days = min(days, 1 + min_days(n // 2))
        # 如果 n 能被 3 整除，吃掉 2*(n/3) 个橘子
        if n % 3 == 0:
            days = min(days, 1 + min_days(n // 3))
        return days

    return min_days(n)

Solution = create_solution(solution_function_name)