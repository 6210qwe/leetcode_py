# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 3214
标题: Maximize Area of Square Hole in Grid
难度: medium
链接: https://leetcode.cn/problems/maximize-area-of-square-hole-in-grid/
题目类型: 数组、排序
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
2943. 最大化网格图中正方形空洞的面积 - 给你两个整数 n 和 m，以及两个整数数组 hBars 和 vBars。网格由 n + 2 条水平线和 m + 2 条竖直线组成，形成 1x1 的单元格。网格中的线条从 1 开始编号。 你可以从 hBars 中 删除 一些水平线条，并从 vBars 中删除一些竖直线条。注意，其他线条是固定的，无法删除。 返回一个整数表示移除一些线条（可以不移除任何线条）后，网格中 正方形空洞的最大面积 。 示例 1： [https://assets.leetcode.com/uploads/2023/11/05/screenshot-from-2023-11-05-22-40-25.png] 输入: n = 2, m = 1, hBars = [2,3], vBars = [2] 输出: 4 解释: 左侧图片展示了网格的初始状态。水平线是 [1,2,3,4]，竖直线是 [1,2,3]。 构造最大正方形空洞的一种方法是移除水平线 2 和竖直线 2。 示例 2： [https://assets.leetcode.com/uploads/2023/11/04/screenshot-from-2023-11-04-17-01-02.png] 输入: n = 1, m = 1, hBars = [2], vBars = [2] 输出: 4 解释: 移除水平线 2 和竖直线 2，可以得到最大正方形空洞。 示例 3： [https://assets.leetcode.com/uploads/2024/03/12/unsaved-image-2.png] 输入: n = 2, m = 3, hBars = [2,3], vBars = [2,4] 输出: 4 解释: 构造最大正方形空洞的一种方法是移除水平线 3 和竖直线 4。 提示： * 1 <= n <= 109 * 1 <= m <= 109 * 1 <= hBars.length <= 100 * 2 <= hBars[i] <= n + 1 * 1 <= vBars.length <= 100 * 2 <= vBars[i] <= m + 1 * hBars 中所有值互不相同。 * vBars 中所有值互不相同。
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 找到连续的最长的可删除的水平线和竖直线段，然后取它们的最小值作为正方形的边长。

算法步骤:
1. 对 hBars 和 vBars 进行排序。
2. 计算连续的可删除的水平线和竖直线段的长度。
3. 取这些长度的最小值作为正方形的边长。
4. 返回正方形的面积。

关键点:
- 排序后的 hBars 和 vBars 可以方便地计算连续的可删除线段的长度。
- 使用 min 函数来找到正方形的最大边长。
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(h + v log v)，其中 h 是 hBars 的长度，v 是 vBars 的长度。排序操作的时间复杂度是 O(v log v)。
空间复杂度: O(1)，只使用了常数级的额外空间。
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List

def maximize_square_hole_area(n: int, m: int, hBars: List[int], vBars: List[int]) -> int:
    """
    计算移除一些线条后网格中正方形空洞的最大面积。
    
    :param n: 水平线的数量
    :param m: 竖直线的数量
    :param hBars: 可以删除的水平线
    :param vBars: 可以删除的竖直线
    :return: 最大正方形空洞的面积
    """
    # 对 hBars 和 vBars 进行排序
    hBars.sort()
    vBars.sort()

    # 计算连续的可删除的水平线和竖直线段的长度
    max_h_gap = 1
    max_v_gap = 1

    for i in range(1, len(hBars)):
        if hBars[i] == hBars[i - 1] + 1:
            max_h_gap += 1
        else:
            max_h_gap = 1

    for i in range(1, len(vBars)):
        if vBars[i] == vBars[i - 1] + 1:
            max_v_gap += 1
        else:
            max_v_gap = 1

    # 取这些长度的最小值作为正方形的边长
    side_length = min(max_h_gap, max_v_gap)

    # 返回正方形的面积
    return side_length * side_length

Solution = create_solution(maximize_square_hole_area)