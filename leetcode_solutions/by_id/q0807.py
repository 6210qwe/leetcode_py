# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 807
标题: Custom Sort String
难度: medium
链接: https://leetcode.cn/problems/custom-sort-string/
题目类型: 哈希表、字符串、排序
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
791. 自定义字符串排序 - 给定两个字符串 order 和 s 。order 的所有字母都是 唯一 的，并且预先按照一些自定义的顺序排序。 对 s 的字符进行置换，使其与排序的 order 相匹配。更具体地说，如果在 order 中的字符 x 出现字符 y 之前，那么在排列后的字符串中， x 也应该出现在 y 之前。 返回 满足这个性质的 s 的任意一种排列 。 示例 1： 输入： order = "cba", s = "abcd" 输出： "cbad" 解释： "a"，"b"，"c" 在 order 中出现，所以 "a"，"b"，"c" 的顺序应该是 "c"，"b"，和 "a"。 由于 "d" 没有在 order 中出现，它可以在返回字符串的任意位置。"dcba"，"cdba"，"cbda" 也是合法的输出。 示例 2： 输入： order = "bcafg", s = "abcd" 输出： "bcad" 解释：order 中的字符 "b"、"c" 和 "a" 决定了 s 中字符的顺序。s 中的字符 "d" 没有出现在 order 中，因此其位置是可变的。 按照 order 中的出现顺序，"b"、"c" 和 "a" 应该按 "b"、"c"、"a" 的顺序排列。"d" 可以放在任何位置，因为它不受顺序限制。输出 "bcad" 正确遵循了这一规则。其他排列如 "dbca" 或 "bcda" 也是合法的，只要 "b"、"c"、"a" 的顺序保持不变。 提示: * 1 <= order.length <= 26 * 1 <= s.length <= 200 * order 和 s 由小写英文字母组成 * order 中的所有字符都 不同
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 使用哈希表记录 order 中每个字符的顺序，然后根据这些顺序对 s 进行排序。

算法步骤:
1. 创建一个哈希表，记录 order 中每个字符的顺序。
2. 根据哈希表中的顺序对 s 进行排序。
3. 返回排序后的字符串。

关键点:
- 使用哈希表记录字符顺序，可以快速查找。
- 使用 Python 的 sorted 函数进行排序，简洁高效。
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(n + m log m)，其中 n 是 order 的长度，m 是 s 的长度。构建哈希表的时间复杂度为 O(n)，排序的时间复杂度为 O(m log m)。
空间复杂度: O(n + m)，哈希表的空间复杂度为 O(n)，排序过程中需要额外的空间 O(m)。
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List, Optional
from leetcode_solutions.utils.linked_list import ListNode
from leetcode_solutions.utils.tree import TreeNode
from leetcode_solutions.utils.solution import create_solution


def custom_sort_string(order: str, s: str) -> str:
    """
    函数式接口 - 实现自定义字符串排序
    """
    # 创建一个哈希表，记录 order 中每个字符的顺序
    order_index = {char: index for index, char in enumerate(order)}
    
    # 根据哈希表中的顺序对 s 进行排序
    sorted_s = sorted(s, key=lambda char: order_index.get(char, len(order)))
    
    # 返回排序后的字符串
    return ''.join(sorted_s)


Solution = create_solution(custom_sort_string)