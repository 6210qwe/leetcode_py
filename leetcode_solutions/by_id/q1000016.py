# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 1000016
标题: Sorted Matrix Search LCCI
难度: medium
链接: https://leetcode.cn/problems/sorted-matrix-search-lcci/
题目类型: 数组、二分查找、分治、矩阵
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
面试题 10.09. 排序矩阵查找 - 给定 M×N 矩阵，每一行、每一列都按升序排列，请编写代码找出某元素。 示例： 现有矩阵 matrix 如下： [ [1, 4, 7, 11, 15], [2, 5, 8, 12, 19], [3, 6, 9, 16, 22], [10, 13, 14, 17, 24], [18, 21, 23, 26, 30] ] 给定 target = 5，返回 true。 给定 target = 20，返回 false。
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 从矩阵的右上角开始搜索，利用矩阵的排序特性进行优化。

算法步骤:
1. 从矩阵的右上角开始。
2. 如果当前元素等于目标值，返回 True。
3. 如果当前元素大于目标值，向左移动一列。
4. 如果当前元素小于目标值，向下移动一行。
5. 重复上述步骤直到找到目标值或越界。

关键点:
- 从右上角开始搜索可以有效地利用矩阵的排序特性。
- 每次移动都可以排除一行或一列，从而减少搜索范围。
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(m + n)，其中 m 是矩阵的行数，n 是矩阵的列数。
空间复杂度: O(1)，只使用了常数级的额外空间。
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List, Optional
from leetcode_solutions.utils.linked_list import ListNode
from leetcode_solutions.utils.tree import TreeNode
from leetcode_solutions.utils.solution import create_solution


def search_matrix(matrix: List[List[int]], target: int) -> bool:
    """
    从矩阵的右上角开始搜索，利用矩阵的排序特性进行优化。
    """
    if not matrix or not matrix[0]:
        return False
    
    rows, cols = len(matrix), len(matrix[0])
    row, col = 0, cols - 1
    
    while row < rows and col >= 0:
        if matrix[row][col] == target:
            return True
        elif matrix[row][col] > target:
            col -= 1
        else:
            row += 1
    
    return False


Solution = create_solution(search_matrix)