# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 3629
标题: Total Characters in String After Transformations I
难度: medium
链接: https://leetcode.cn/problems/total-characters-in-string-after-transformations-i/
题目类型: 哈希表、数学、字符串、动态规划、计数
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
3335. 字符串转换后的长度 I - 给你一个字符串 s 和一个整数 t，表示要执行的 转换 次数。每次 转换 需要根据以下规则替换字符串 s 中的每个字符： * 如果字符是 'z'，则将其替换为字符串 "ab"。 * 否则，将其替换为字母表中的下一个字符。例如，'a' 替换为 'b'，'b' 替换为 'c'，依此类推。 返回 恰好 执行 t 次转换后得到的字符串的 长度。 由于答案可能非常大，返回其对 109 + 7 取余的结果。 示例 1： 输入： s = "abcyy", t = 2 输出： 7 解释： * 第一次转换 (t = 1) * 'a' 变为 'b' * 'b' 变为 'c' * 'c' 变为 'd' * 'y' 变为 'z' * 'y' 变为 'z' * 第一次转换后的字符串为："bcdzz" * 第二次转换 (t = 2) * 'b' 变为 'c' * 'c' 变为 'd' * 'd' 变为 'e' * 'z' 变为 "ab" * 'z' 变为 "ab" * 第二次转换后的字符串为："cdeabab" * 最终字符串长度：字符串为 "cdeabab"，长度为 7 个字符。 示例 2： 输入： s = "azbk", t = 1 输出： 5 解释： * 第一次转换 (t = 1) * 'a' 变为 'b' * 'z' 变为 "ab" * 'b' 变为 'c' * 'k' 变为 'l' * 第一次转换后的字符串为："babcl" * 最终字符串长度：字符串为 "babcl"，长度为 5 个字符。 提示： * 1 <= s.length <= 105 * s 仅由小写英文字母组成。 * 1 <= t <= 105
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 使用数学方法计算最终字符串的长度，避免直接模拟转换过程。

算法步骤:
1. 计算字符串中 'z' 的数量。
2. 计算非 'z' 字符的数量。
3. 根据 'z' 和非 'z' 字符的数量以及转换次数 t，计算最终字符串的长度。

关键点:
- 'z' 转换为 "ab" 会使字符串长度增加 1。
- 非 'z' 字符转换为下一个字符不会改变字符串长度。
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(n)，其中 n 是字符串 s 的长度。我们需要遍历字符串一次来统计 'z' 和非 'z' 字符的数量。
空间复杂度: O(1)，我们只使用了常数级的额外空间。
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List, Optional
from leetcode_solutions.utils.linked_list import ListNode
from leetcode_solutions.utils.tree import TreeNode
from leetcode_solutions.utils.solution import create_solution


def solution_function_name(s: str, t: int) -> int:
    """
    函数式接口 - 计算字符串转换后的长度
    """
    MOD = 10**9 + 7
    z_count = s.count('z')
    non_z_count = len(s) - z_count
    
    # 计算转换 t 次后 'z' 对应的长度增量
    length_increase = (2 * z_count * t) % MOD
    
    # 计算最终字符串长度
    final_length = (non_z_count + length_increase) % MOD
    
    return final_length


Solution = create_solution(solution_function_name)