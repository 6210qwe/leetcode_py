# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 1391
标题: Counting Elements
难度: easy
链接: https://leetcode.cn/problems/counting-elements/
题目类型: 数组、哈希表
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
给定一个整数数组 arr，返回数组中满足以下条件的元素数量：
存在某个下标 i 使得 arr[i] + 1 也在数组 arr 中。
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 使用哈希表记录数组中每个元素的出现情况，然后遍历数组检查每个元素加一后的值是否在哈希表中。

算法步骤:
1. 创建一个哈希表来记录数组中每个元素的出现情况。
2. 遍历数组，对于每个元素，检查其加一后的值是否在哈希表中。
3. 如果存在，则计数器加一。
4. 返回计数器的值。

关键点:
- 使用哈希表可以在 O(1) 时间内检查某个值是否存在。
- 只需要一次遍历数组即可完成计数。
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(n)，其中 n 是数组的长度。我们需要遍历数组两次，一次用于填充哈希表，另一次用于计数。
空间复杂度: O(n)，哈希表的空间复杂度为 O(n)。
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List, Optional
from leetcode_solutions.utils.linked_list import ListNode
from leetcode_solutions.utils.tree import TreeNode
from leetcode_solutions.utils.solution import create_solution


def count_elements(arr: List[int]) -> int:
    """
    函数式接口 - 计算数组中满足条件的元素数量
    """
    # 创建一个哈希表来记录数组中每个元素的出现情况
    element_set = set(arr)
    
    # 初始化计数器
    count = 0
    
    # 遍历数组，检查每个元素加一后的值是否在哈希表中
    for num in arr:
        if num + 1 in element_set:
            count += 1
    
    return count


Solution = create_solution(count_elements)