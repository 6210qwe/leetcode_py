# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 2602
标题: Maximum Enemy Forts That Can Be Captured
难度: easy
链接: https://leetcode.cn/problems/maximum-enemy-forts-that-can-be-captured/
题目类型: 数组、双指针
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
2511. 最多可以摧毁的敌人城堡数目 - 给你一个长度为 n ，下标从 0 开始的整数数组 forts ，表示一些城堡。forts[i] 可以是 -1 ，0 或者 1 ，其中： * -1 表示第 i 个位置 没有 城堡。 * 0 表示第 i 个位置有一个 敌人 的城堡。 * 1 表示第 i 个位置有一个你控制的城堡。 现在，你需要决定，将你的军队从某个你控制的城堡位置 i 移动到一个空的位置 j ，满足： * 0 <= i, j <= n - 1 * 军队经过的位置 只有 敌人的城堡。正式的，对于所有 min(i,j) < k < max(i,j) 的 k ，都满足 forts[k] == 0 。 当军队移动时，所有途中经过的敌人城堡都会被 摧毁 。 请你返回 最多 可以摧毁的敌人城堡数目。如果 无法 移动你的军队，或者没有你控制的城堡，请返回 0 。 示例 1： 输入：forts = [1,0,0,-1,0,0,0,0,1] 输出：4 解释： - 将军队从位置 0 移动到位置 3 ，摧毁 2 个敌人城堡，位置分别在 1 和 2 。 - 将军队从位置 8 移动到位置 3 ，摧毁 4 个敌人城堡。 4 是最多可以摧毁的敌人城堡数目，所以我们返回 4 。 示例 2： 输入：forts = [0,0,1,-1] 输出：0 解释：由于无法摧毁敌人的城堡，所以返回 0 。 提示： * 1 <= forts.length <= 1000 * -1 <= forts[i] <= 1
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 使用双指针方法遍历数组，找到所有可能的移动路径，并计算每个路径上可以摧毁的敌人城堡数目。

算法步骤:
1. 初始化两个指针 `i` 和 `j`，以及一个变量 `max_destroyed` 来记录最多可以摧毁的敌人城堡数目。
2. 遍历数组 `forts`，使用 `i` 指针找到第一个非零元素。
3. 使用 `j` 指针从 `i` 开始向后遍历，直到找到下一个非零元素。
4. 如果 `forts[i]` 和 `forts[j]` 一个是 1 一个是 -1，则计算 `i` 和 `j` 之间的敌人城堡数目，并更新 `max_destroyed`。
5. 更新 `i` 为 `j`，继续遍历直到结束。

关键点:
- 使用双指针方法可以在 O(n) 时间复杂度内完成遍历。
- 通过一次遍历即可找到所有可能的移动路径，并计算最大值。
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(n)
空间复杂度: O(1)
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List, Optional
from leetcode_solutions.utils.linked_list import ListNode
from leetcode_solutions.utils.tree import TreeNode
from leetcode_solutions.utils.solution import create_solution


def solution_function_name(forts: List[int]) -> int:
    """
    函数式接口 - 计算最多可以摧毁的敌人城堡数目
    """
    n = len(forts)
    max_destroyed = 0
    i = 0
    
    while i < n:
        if forts[i] == 0:
            i += 1
            continue
        
        j = i + 1
        while j < n and forts[j] == 0:
            j += 1
        
        if j < n and forts[i] + forts[j] == 0:
            max_destroyed = max(max_destroyed, j - i - 1)
        
        i = j
    
    return max_destroyed


Solution = create_solution(solution_function_name)