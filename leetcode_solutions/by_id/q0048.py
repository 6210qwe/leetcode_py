# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 48
标题: Rotate Image
难度: medium
链接: https://leetcode.cn/problems/rotate-image/
题目类型: 数组、数学、矩阵
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
48. 旋转图像 - 给定一个 n × n 的二维矩阵 matrix 表示一个图像。请你将图像顺时针旋转 90 度。 你必须在 原地 [https://baike.baidu.com/item/%E5%8E%9F%E5%9C%B0%E7%AE%97%E6%B3%95] 旋转图像，这意味着你需要直接修改输入的二维矩阵。请不要 使用另一个矩阵来旋转图像。 示例 1： [https://assets.leetcode.com/uploads/2020/08/28/mat1.jpg] 输入：matrix = [[1,2,3],[4,5,6],[7,8,9]] 输出：[[7,4,1],[8,5,2],[9,6,3]] 示例 2： [https://assets.leetcode.com/uploads/2020/08/28/mat2.jpg] 输入：matrix = [[5,1,9,11],[2,4,8,10],[13,3,6,7],[15,14,12,16]] 输出：[[15,13,2,5],[14,3,4,1],[12,6,8,9],[16,7,10,11]] 提示： * n == matrix.length == matrix[i].length * 1 <= n <= 20 * -1000 <= matrix[i][j] <= 1000
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 先转置矩阵，然后反转每一行

算法步骤:
1. 转置矩阵：matrix[i][j] <-> matrix[j][i]
2. 反转每一行

关键点:
- 转置+反转每一行
- 时间复杂度O(n^2)，空间复杂度O(1)
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(n^2) - 需要遍历矩阵
空间复杂度: O(1) - 只使用常数额外空间
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List
from leetcode_solutions.utils.solution import create_solution


def rotate_image(matrix: List[List[int]]) -> None:
    """
    函数式接口 - 旋转图像
    
    实现思路:
    先转置矩阵，然后反转每一行。
    
    Args:
        matrix: n×n的二维矩阵（原地修改）
        
    Returns:
        None（直接修改矩阵）
        
    Example:
        >>> matrix = [[1,2,3],[4,5,6],[7,8,9]]
        >>> rotate_image(matrix)
        >>> matrix
        [[7, 4, 1], [8, 5, 2], [9, 6, 3]]
    """
    n = len(matrix)
    
    # 转置矩阵
    for i in range(n):
        for j in range(i + 1, n):
            matrix[i][j], matrix[j][i] = matrix[j][i], matrix[i][j]
    
    # 反转每一行
    for i in range(n):
        matrix[i].reverse()


# 自动生成Solution类（无需手动编写）
Solution = create_solution(rotate_image)
