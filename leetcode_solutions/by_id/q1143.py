# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 1143
标题: Find Smallest Common Element in All Rows
难度: medium
链接: https://leetcode.cn/problems/find-smallest-common-element-in-all-rows/
题目类型: 数组、哈希表、二分查找、计数、矩阵
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
1198. 找出所有行中最小公共元素 - 备战技术面试？力扣提供海量技术面试资源，帮助你高效提升编程技能,轻松拿下世界 IT 名企 Dream Offer。
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 使用哈希表记录每个元素在每一行出现的次数，然后找到出现次数等于行数的最小元素。

算法步骤:
1. 初始化一个字典 `count` 用于记录每个元素在每一行出现的次数。
2. 遍历矩阵的每一行，更新 `count` 字典。
3. 遍历 `count` 字典，找到出现次数等于行数的最小元素。

关键点:
- 使用哈希表记录元素出现次数，可以高效地统计和查找。
- 只需要一次遍历矩阵即可完成统计。
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(m * n)，其中 m 是矩阵的行数，n 是每行的元素个数。
空间复杂度: O(n)，最坏情况下，哈希表中存储了所有不同的元素。
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List, Optional
from leetcode_solutions.utils.linked_list import ListNode
from leetcode_solutions.utils.tree import TreeNode
from leetcode_solutions.utils.solution import create_solution


def solution_function_name(mat: List[List[int]]) -> int:
    """
    函数式接口 - 找出所有行中最小公共元素
    """
    if not mat or not mat[0]:
        return -1

    count = {}
    for row in mat:
        for num in row:
            if num not in count:
                count[num] = 0
            count[num] += 1

    # 找到出现次数等于行数的最小元素
    for num in sorted(count.keys()):
        if count[num] == len(mat):
            return num

    return -1


Solution = create_solution(solution_function_name)