# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 551
标题: Student Attendance Record I
难度: easy
链接: https://leetcode.cn/problems/student-attendance-record-i/
题目类型: 字符串
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
551. 学生出勤记录 I - 给你一个字符串 s 表示一个学生的出勤记录，其中的每个字符用来标记当天的出勤情况（缺勤、迟到、到场）。记录中只含下面三种字符： * 'A'：Absent，缺勤 * 'L'：Late，迟到 * 'P'：Present，到场 如果学生能够 同时 满足下面两个条件，则可以获得出勤奖励： * 按 总出勤 计，学生缺勤（'A'）严格 少于两天。 * 学生 不会 存在 连续 3 天或 连续 3 天以上的迟到（'L'）记录。 如果学生可以获得出勤奖励，返回 true ；否则，返回 false 。 示例 1： 输入：s = "PPALLP" 输出：true 解释：学生缺勤次数少于 2 次，且不存在 3 天或以上的连续迟到记录。 示例 2： 输入：s = "PPALLL" 输出：false 解释：学生最后三天连续迟到，所以不满足出勤奖励的条件。 提示： * 1 <= s.length <= 1000 * s[i] 为 'A'、'L' 或 'P'
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 通过一次遍历字符串来检查是否存在超过一次的缺勤和连续三次的迟到。

算法步骤:
1. 初始化两个计数器：absent_count 用于记录缺勤次数，late_streak 用于记录连续迟到的天数。
2. 遍历字符串：
   - 如果当前字符是 'A'，增加 absent_count。
   - 如果当前字符是 'L'，增加 late_streak。
   - 如果当前字符不是 'L'，重置 late_streak。
3. 在遍历过程中，如果 absent_count 超过 1 或 late_streak 达到 3，返回 False。
4. 遍历结束后，如果没有违反条件，返回 True。

关键点:
- 一次遍历即可完成所有检查，时间复杂度为 O(n)。
- 只使用常数空间，空间复杂度为 O(1)。
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(n)，其中 n 是字符串 s 的长度。
空间复杂度: O(1)，只使用了常数级的额外空间。
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List, Optional
from leetcode_solutions.utils.linked_list import ListNode
from leetcode_solutions.utils.tree import TreeNode
from leetcode_solutions.utils.solution import create_solution


def check_record(s: str) -> bool:
    """
    函数式接口 - 检查学生出勤记录是否满足出勤奖励条件
    """
    absent_count = 0
    late_streak = 0
    
    for char in s:
        if char == 'A':
            absent_count += 1
            if absent_count > 1:
                return False
        if char == 'L':
            late_streak += 1
            if late_streak >= 3:
                return False
        else:
            late_streak = 0
    
    return True


Solution = create_solution(check_record)