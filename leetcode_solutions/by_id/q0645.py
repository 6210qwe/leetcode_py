# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 645
标题: Set Mismatch
难度: easy
链接: https://leetcode.cn/problems/set-mismatch/
题目类型: 位运算、数组、哈希表、排序
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
645. 错误的集合 - 集合 s 包含从 1 到 n 的整数。不幸的是，因为数据错误，导致集合里面某一个数字复制成了集合里面的另外一个数字的值，导致集合 丢失了一个数字 并且 有一个数字重复 。 给定一个数组 nums 代表了该集合发生错误后的结果。 请你找出重复出现的整数，再找到丢失的整数，将它们以数组的形式返回。 示例 1： 输入：nums = [1,2,2,4] 输出：[2,3] 示例 2： 输入：nums = [1,1] 输出：[1,2] 提示： * 2 <= nums.length <= 104 * 1 <= nums[i] <= 104
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 使用数学方法计算缺失和重复的数字。

算法步骤:
1. 计算数组的总和 sum(nums) 和 1 到 n 的理论总和 sum(1 to n)。
2. 通过差值找到缺失的数字和重复的数字。

关键点:
- 利用数学公式简化计算。
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(n)
空间复杂度: O(1)
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List, Optional
from leetcode_solutions.utils.linked_list import ListNode
from leetcode_solutions.utils.tree import TreeNode
from leetcode_solutions.utils.solution import create_solution


def solution_function_name(nums: List[int]) -> List[int]:
    """
    函数式接口 - 找出重复和缺失的数字
    """
    n = len(nums)
    total_sum = sum(nums)
    expected_sum = (n * (n + 1)) // 2
    set_sum = sum(set(nums))
    
    # 重复的数字是实际总和与集合总和的差值
    duplicate = total_sum - set_sum
    # 缺失的数字是理论总和与集合总和的差值
    missing = expected_sum - set_sum
    
    return [duplicate, missing]


Solution = create_solution(solution_function_name)