# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 3046
标题: Minimum Operations to Make a Special Number
难度: medium
链接: https://leetcode.cn/problems/minimum-operations-to-make-a-special-number/
题目类型: 贪心、数学、字符串、枚举
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
2844. 生成特殊数字的最少操作 - 给你一个下标从 0 开始的字符串 num ，表示一个非负整数。 在一次操作中，您可以选择 num 的任意一位数字并将其删除。请注意，如果你删除 num 中的所有数字，则 num 变为 0。 返回最少需要多少次操作可以使 num 变成特殊数字。 如果整数 x 能被 25 整除，则该整数 x 被认为是特殊数字。 示例 1： 输入：num = "2245047" 输出：2 解释：删除数字 num[5] 和 num[6] ，得到数字 "22450" ，可以被 25 整除。 可以证明要使数字变成特殊数字，最少需要删除 2 位数字。 示例 2： 输入：num = "2908305" 输出：3 解释：删除 num[3]、num[4] 和 num[6] ，得到数字 "2900" ，可以被 25 整除。 可以证明要使数字变成特殊数字，最少需要删除 3 位数字。 示例 3： 输入：num = "10" 输出：1 解释：删除 num[0] ，得到数字 "0" ，可以被 25 整除。 可以证明要使数字变成特殊数字，最少需要删除 1 位数字。 提示 * 1 <= num.length <= 100 * num 仅由数字 '0' 到 '9' 组成 * num 不含任何前导零
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 通过枚举所有可能的结尾组合（00, 25, 50, 75），找到最小的操作次数。

算法步骤:
1. 从后向前遍历字符串，寻找第一个符合条件的结尾组合。
2. 计算删除操作次数。
3. 返回最小的操作次数。

关键点:
- 从后向前遍历可以确保找到最短的删除路径。
- 通过预定义的结尾组合进行匹配。
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(n)，其中 n 是字符串 num 的长度。每个字符最多被检查两次。
空间复杂度: O(1)，只使用了常数级的额外空间。
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List, Optional
from leetcode_solutions.utils.linked_list import ListNode
from leetcode_solutions.utils.tree import TreeNode
from leetcode_solutions.utils.solution import create_solution


def min_operations_to_special_number(num: str) -> int:
    """
    函数式接口 - 返回最少需要多少次操作可以使 num 变成特殊数字。
    """
    n = len(num)
    targets = ["00", "25", "50", "75"]
    min_ops = n  # 初始化为最大值

    for target in targets:
        i = n - 1
        ops = 0
        for char in reversed(target):
            while i >= 0 and (num[i] != char or (char == '0' and ops == 0)):
                i -= 1
                ops += 1
            if i < 0:
                break
            i -= 1
        if i >= -1:
            min_ops = min(min_ops, ops)

    return min_ops


Solution = create_solution(min_operations_to_special_number)