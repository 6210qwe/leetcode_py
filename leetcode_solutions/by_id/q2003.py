# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 2003
标题: Distinct Numbers in Each Subarray
难度: medium
链接: https://leetcode.cn/problems/distinct-numbers-in-each-subarray/
题目类型: 数组、哈希表、滑动窗口
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
1852. 每个子数组的数字种类数 - 备战技术面试？力扣提供海量技术面试资源，帮助你高效提升编程技能,轻松拿下世界 IT 名企 Dream Offer。
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 使用滑动窗口和哈希表来记录每个子数组中的不同数字。

算法步骤:
1. 初始化一个哈希表 `count` 来记录当前窗口内的数字频率。
2. 使用两个指针 `left` 和 `right` 来表示滑动窗口的左右边界。
3. 遍历数组，对于每个右指针 `right`，将其对应的数字加入哈希表，并更新计数。
4. 如果窗口大小超过 `k`，则移动左指针 `left`，并从哈希表中移除相应的数字。
5. 在每次移动右指针时，记录当前窗口内不同数字的数量。

关键点:
- 使用滑动窗口可以将时间复杂度从 O(n * k) 降低到 O(n)。
- 哈希表用于快速记录和更新窗口内的数字频率。
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(n)
空间复杂度: O(k)，其中 k 是子数组的长度。
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List

def distinct_numbers_in_subarrays(nums: List[int], k: int) -> List[int]:
    """
    返回每个长度为 k 的子数组中不同数字的数量。
    """
    count = {}
    result = []
    left = 0
    
    for right in range(len(nums)):
        if nums[right] not in count:
            count[nums[right]] = 0
        count[nums[right]] += 1
        
        if right - left + 1 > k:
            count[nums[left]] -= 1
            if count[nums[left]] == 0:
                del count[nums[left]]
            left += 1
        
        if right >= k - 1:
            result.append(len(count))
    
    return result

Solution = create_solution(distinct_numbers_in_subarrays)