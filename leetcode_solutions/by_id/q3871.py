# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 3871
标题: Minimum Deletions for At Most K Distinct Characters
难度: easy
链接: https://leetcode.cn/problems/minimum-deletions-for-at-most-k-distinct-characters/
题目类型: 贪心、哈希表、字符串、计数、排序
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
3545. 不同字符数量最多为 K 时的最少删除数 - 给你一个字符串 s（由小写英文字母组成）和一个整数 k。 你的任务是删除字符串中的一些字符（可以不删除任何字符），使得结果字符串中的 不同字符数量 最多为 k。 返回为达到上述目标所需删除的 最小 字符数量。 示例 1： 输入： s = "abc", k = 2 输出： 1 解释： * s 有三个不同的字符：'a'、'b' 和 'c'，每个字符的出现频率为 1。 * 由于最多只能有 k = 2 个不同字符，需要删除某一个字符的所有出现。 * 例如，删除所有 'c' 后，结果字符串中的不同字符数最多为 k。因此，答案是 1。 示例 2： 输入： s = "aabb", k = 2 输出： 0 解释： * s 有两个不同的字符（'a' 和 'b'），它们的出现频率分别为 2 和 2。 * 由于最多可以有 k = 2 个不同字符，不需要删除任何字符。因此，答案是 0。 示例 3： 输入： s = "yyyzz", k = 1 输出： 2 解释： * s 有两个不同的字符（'y' 和 'z'），它们的出现频率分别为 3 和 2。 * 由于最多只能有 k = 1 个不同字符，需要删除某一个字符的所有出现。 * 删除所有 'z' 后，结果字符串中的不同字符数最多为 k。因此，答案是 2。 提示： * 1 <= s.length <= 16 * 1 <= k <= 16 * s 仅由小写英文字母组成。
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 使用贪心算法和哈希表来计算最少删除次数。

算法步骤:
1. 统计字符串中每个字符的频率。
2. 如果不同的字符数不超过 k，则不需要删除任何字符。
3. 否则，按频率从小到大排序字符，并删除频率最低的字符，直到不同的字符数不超过 k。

关键点:
- 使用哈希表统计字符频率。
- 按频率排序并删除频率最低的字符。
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(n log n)，其中 n 是字符串的长度。主要消耗在排序操作上。
空间复杂度: O(n)，用于存储字符频率。
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List, Optional
from leetcode_solutions.utils.linked_list import ListNode
from leetcode_solutions.utils.tree import TreeNode
from leetcode_solutions.utils.solution import create_solution


def minimum_deletions_for_at_most_k_distinct_characters(s: str, k: int) -> int:
    """
    函数式接口 - 计算最少删除次数以使字符串中的不同字符数量最多为 k
    """
    from collections import Counter

    # 统计每个字符的频率
    char_count = Counter(s)
    
    # 如果不同的字符数不超过 k，则不需要删除任何字符
    if len(char_count) <= k:
        return 0
    
    # 按频率从小到大排序字符
    sorted_counts = sorted(char_count.values())
    
    # 删除频率最低的字符，直到不同的字符数不超过 k
    deletions = sum(sorted_counts[:len(char_count) - k])
    
    return deletions


Solution = create_solution(minimum_deletions_for_at_most_k_distinct_characters)