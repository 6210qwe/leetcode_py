# -*- coding:utf-8 -*-
# ============================================================================
# 题目信息
# ============================================================================
"""
题号: 26
标题: Remove Duplicates from Sorted Array
难度: easy
链接: https://leetcode.cn/problems/remove-duplicates-from-sorted-array/
题目类型: 数组、双指针
"""

# ============================================================================
# 问题描述
# ============================================================================
"""
26. 删除有序数组中的重复项 - 给你一个 非严格递增排列 的数组 nums ，请你 原地 [http://baike.baidu.com/item/%E5%8E%9F%E5%9C%B0%E7%AE%97%E6%B3%95] 删除重复出现的元素，使每个元素 只出现一次 ，返回删除后数组的新长度。元素的 相对顺序 应该保持 一致 。然后返回 nums 中唯一元素的个数。 考虑 nums 的唯一元素的数量为 k。去重后，返回唯一元素的数量 k。 nums 的前 k 个元素应包含 排序后 的唯一数字。下标 k - 1 之后的剩余元素可以忽略。 判题标准: 系统会用下面的代码来测试你的题解: int[] nums = [...]; // 输入数组 int[] expectedNums = [...]; // 长度正确的期望答案 int k = removeDuplicates(nums); // 调用 assert k == expectedNums.length; for (int i = 0; i < k; i++) { assert nums[i] == expectedNums[i]; } 如果所有断言都通过，那么您的题解将被 通过。 示例 1： 输入：nums = [1,1,2] 输出：2, nums = [1,2,_] 解释：函数应该返回新的长度 2 ，并且原数组 nums 的前两个元素被修改为 1, 2 。不需要考虑数组中超出新长度后面的元素。 示例 2： 输入：nums = [0,0,1,1,1,2,2,3,3,4] 输出：5, nums = [0,1,2,3,4,_,_,_,_,_] 解释：函数应该返回新的长度 5 ， 并且原数组 nums 的前五个元素被修改为 0, 1, 2, 3, 4 。不需要考虑数组中超出新长度后面的元素。 提示： * 1 <= nums.length <= 3 * 104 * -100 <= nums[i] <= 100 * nums 已按 非递减 顺序排列。
"""

# ============================================================================
# 实现思路
# ============================================================================
"""
核心思想: 双指针法，使用快慢指针，快指针遍历数组，慢指针指向下一个不重复元素的位置

算法步骤:
1. 如果数组为空，返回0
2. 使用slow指针指向下一个不重复元素的位置（初始为1）
3. 使用fast指针遍历数组（从1开始）
4. 如果nums[fast] != nums[fast-1]，说明遇到新元素：
   - 将nums[fast]放到nums[slow]位置
   - slow指针右移
5. 返回slow（不重复元素的数量）

关键点:
- 由于数组已排序，重复元素必然相邻
- 只需要比较当前元素和前一个元素
- 时间复杂度O(n)，空间复杂度O(1)
"""

# ============================================================================
# 复杂度分析
# ============================================================================
"""
时间复杂度: O(n) - 只需遍历数组一次，n为数组长度
空间复杂度: O(1) - 只使用常数额外空间
"""

# ============================================================================
# 代码实现
# ============================================================================

from typing import List
from leetcode_solutions.utils.solution import create_solution


def remove_duplicates(nums: List[int]) -> int:
    """
    函数式接口 - 双指针法实现
    
    实现思路:
    使用快慢指针，快指针遍历数组，慢指针指向下一个不重复元素的位置。
    
    Args:
        nums: 非严格递增排列的数组
        
    Returns:
        删除重复元素后数组的新长度
        
    Example:
        >>> nums = [1,1,2]
        >>> remove_duplicates(nums)
        2
        >>> nums[:2]
        [1, 2]
    """
    if not nums:
        return 0
    
    slow = 1  # 慢指针，指向下一个不重复元素的位置
    for fast in range(1, len(nums)):
        # 如果当前元素与前一个元素不同，说明遇到新元素
        if nums[fast] != nums[fast - 1]:
            nums[slow] = nums[fast]
            slow += 1
    
    return slow


# 自动生成Solution类（无需手动编写）
Solution = create_solution(remove_duplicates)
